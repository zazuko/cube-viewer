(function(){var e={59920:function(e,t,n){"use strict";n(66992),n(88674),n(19601),n(17727);var r=n(49963),a=n(66252),i={class:"w-full h-full p-4 flex flex-col gap-4"},u=(0,a._)("h1",{class:"font-bold text text-gray-600 uppercase"}," Zazuko Cube Viewer ",-1);function o(e,t,n,r,o,l){var s=(0,a.up)("source-config"),c=(0,a.up)("cube-viewer");return(0,a.wg)(),(0,a.iD)("div",i,[u,(0,a.Wm)(s,{source:e.source,"onUpdate:source":t[0]||(t[0]=function(t){return e.source=t}),cubeUri:e.cubeUri,"onUpdate:cubeUri":t[1]||(t[1]=function(t){return e.cubeUri=t}),language:e.language,"onUpdate:language":t[2]||(t[2]=function(t){return e.language=t})},null,8,["source","cubeUri","language"]),e.source&&e.cubeUri?((0,a.wg)(),(0,a.j4)(c,{key:0,source:e.source,cubeUri:e.cubeUri,language:e.language,class:"bg-white rounded shadow-lg overflow-x-auto"},null,8,["source","cubeUri","language"])):(0,a.kq)("",!0)])}n(41539),n(78783),n(33948),n(41637),n(74916),n(64765);var l=n(2262),s=(n(82526),n(41817),n(3577)),c={class:"p-4"},p={key:0},d={key:1,class:"text-red-500"},m={key:2,class:"flex flex-col gap-4"},f=["title"],v={key:0},g={key:1,class:"text-gray-500"},b={key:0,class:"text-sm text-gray-700"},h={class:"h-1"},w=["colspan"],y={class:"flex gap-2 justify-start"},x=["onClick"],D={key:0},k=["colspan"],Z={key:1},_=["colspan"],C={key:2};function S(e,t,n,i,u,o){var l=(0,a.up)("loading-icon"),S=(0,a.up)("information-circle-icon"),U=(0,a.up)("resource-details-dialog"),q=(0,a.up)("dimension-header"),V=(0,a.up)("x-circle-icon"),O=(0,a.up)("observation-value"),P=(0,a.up)("pagination-menu");return(0,a.wg)(),(0,a.iD)("div",c,[e.cube.isLoading?((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(l)])):e.cube.error?((0,a.wg)(),(0,a.iD)("div",d,(0,s.zw)(e.cube.error),1)):((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("header",null,[(0,a._)("h1",{class:"font-bold mb-2",title:e.cube.data.term.value},[e.title?((0,a.wg)(),(0,a.iD)("span",v,(0,s.zw)(e.title),1)):((0,a.wg)(),(0,a.iD)("span",g,"Untitled"))],8,f),e.description?((0,a.wg)(),(0,a.iD)("section",b,(0,s.zw)(e.description),1)):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("button",{onClick:t[0]||(t[0]=function(t){return e.isCubeMetadataOpen=!0}),title:"Cube Metadata"},[(0,a.Wm)(S,{class:"text-gray-500 w-5 h-5"})]),(0,a.Wm)(U,{title:"Cube Metadata",resource:e.cube.data.ptr,"is-open":e.isCubeMetadataOpen,onClose:t[1]||(t[1]=function(t){return e.isCubeMetadataOpen=!1})},null,8,["resource","is-open"])])]),(0,a._)("table",h,[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cube.data.dimensions,(function(t){return(0,a.wg)(),(0,a.iD)("th",{key:t.ptr.term.value,class:"border border-b-2 align-top text-left h-full"},[(0,a.Wm)(q,{cube:e.cube.data,dimension:t,language:e.displayLanguage,labels:e.labels[t.path.value],"sort-dimension":e.sortDimension,"sort-direction":e.sortDirection,filters:e.filters.get(t.path.value),onUpdateSort:e.updateSort,"onUpdate:filters":e.updateDimensionFilters},null,8,["cube","dimension","language","labels","sort-dimension","sort-direction","filters","onUpdateSort","onUpdate:filters"])])})),128))]),(0,a.wy)((0,a._)("tr",null,[(0,a._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-2"},[(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filtersSummary,(function(t,n){return(0,a.wg)(),(0,a.iD)("span",{key:n,class:"tag bg-gray-100 rounded-md flex items-center gap-1"},[(0,a._)("span",null,(0,s.zw)(t.label),1),(0,a._)("button",{title:"Remove filter",onClick:function(n){return e.removeFilter(t)},class:"button-text"},[(0,a.Wm)(V,{class:"w-5 h-5"})],8,x)])})),128))])],8,w)],512),[[r.F8,e.filtersSummary.length>0]])]),e.observations.isLoading?((0,a.wg)(),(0,a.iD)("tbody",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Array(e.pageSize),(function(t){return(0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-2"},[(0,a.Wm)(l)],8,k)])})),128))])):e.observations.error?((0,a.wg)(),(0,a.iD)("tbody",Z,[(0,a._)("tr",null,[(0,a._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-1"},(0,s.zw)(e.observations.error),9,_)])])):((0,a.wg)(),(0,a.iD)("tbody",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.observations.data,(function(t,n){return(0,a.wg)(),(0,a.iD)("tr",{key:n},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cube.data.dimensions,(function(n){return(0,a.wg)(),(0,a.iD)("td",{key:n.ptr.term.value,class:(0,s.C_)(["border px-2 py-1 whitespace-nowrap",{"text-right tabular-nums":e.isNumericScale(n),"bg-primary-50":e.isMeasureDimension(n)}])},[(0,a.Wm)(O,{value:t[n.path.value],cube:e.cube.data,labels:e.labels[n.path.value],language:e.displayLanguage},null,8,["value","cube","labels","language"])],2)})),128))])})),128))]))]),(0,a.Wm)(P,{page:e.page,"onUpdate:page":t[2]||(t[2]=function(t){return e.page=t}),pageSize:e.pageSize,"onUpdate:pageSize":t[3]||(t[3]=function(t){return e.pageSize=t}),"items-count":e.observationCount},null,8,["page","pageSize","items-count"])]))])}var U=n(66347),q=n(89584),V=n(82482),O=n(95082),P=n(56084),L=n(48534),W=(n(35666),n(51532),n(21249),n(68309),n(86535),n(99244),n(92222),n(40561),n(95881)),K=n(20277),I=n(40977),j=n.n(I),R=n(96333),z=n(52083),T={class:"mb-2 flex items-center justify-between"},M=["title"],H={key:0},Y={key:1,class:"text-gray-500"},A={key:2,class:"pt-1"},F={class:"flex items-center gap-1"},E=["title"],B={key:1,class:"tag",title:"Linked to shared dimension"};function $(e,t,n,r,i,u){var o=(0,a.up)("chevron-down-icon"),l=(0,a.up)("chevron-up-icon"),c=(0,a.up)("filter-icon"),p=(0,a.up)("popover-button"),d=(0,a.up)("dimension-filters"),m=(0,a.up)("popover-panel"),f=(0,a.up)("popover"),v=(0,a.up)("scale-type-icon"),g=(0,a.up)("data-kind-icon"),b=(0,a.up)("annotation-icon"),h=(0,a.up)("link-icon"),w=(0,a.up)("dimension-metadata");return(0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)(["h-full px-2 py-1 flex flex-col justify-between",{"bg-primary-50":e.isMeasure}])},[(0,a._)("div",T,[(0,a._)("button",{class:(0,s.C_)(["flex items-start text-left leading-tight",{"font-semibold":e.isMeasure||e.isKey,underline:e.isSortDimension}]),title:e.property,onClick:t[0]||(t[0]=function(){return e.updateSort&&e.updateSort.apply(e,arguments)})},[e.label?((0,a.wg)(),(0,a.iD)("span",H,(0,s.zw)(e.label),1)):((0,a.wg)(),(0,a.iD)("span",Y,"Untitled")),e.isSortDimension?((0,a.wg)(),(0,a.iD)("span",A,[e.isSortAscending?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"w-5 h-5"})):(0,a.kq)("",!0),e.isSortDescending?((0,a.wg)(),(0,a.j4)(l,{key:1,class:"w-5 h-5"})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],10,M),(0,a.Wm)(f,{class:"relative"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{as:"button"},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{class:(0,s.C_)(["w-5 h-5",{"text-primary-500":e.filters.length>0}])},null,8,["class"])]})),_:1}),(0,a.Wm)(m,{class:"z-10 absolute bg-white border rounded shadow-md p-2"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{cube:e.cube,dimension:e.dimension,filters:e.filters,labels:e.labels,language:e.language,"onUpdate:filters":t[1]||(t[1]=function(t){return e.$emit("update:filters",e.dimension,t)})},null,8,["cube","dimension","filters","labels","language"])]})),_:1})]})),_:1})]),(0,a._)("div",F,[(0,a.Wm)(v,{"scale-of-measure":e.scaleType},null,8,["scale-of-measure"]),(0,a.Wm)(g,{"data-kind":e.dataKind},null,8,["data-kind"]),e.description?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"tag",title:e.description},[(0,a.Wm)(b,{class:"w-5 h-5"})],8,E)):(0,a.kq)("",!0),e.isShared?((0,a.wg)(),(0,a.iD)("span",B,[(0,a.Wm)(h,{class:"w-5 h-5"})])):(0,a.kq)("",!0),(0,a.Wm)(w,{dimension:e.dimension},null,8,["dimension"])])],2)}var N=n(68825),G=n(23611),X=n(42648),J=n(12153),Q=n(86523),ee=n(85954),te=n(37892),ne=["title"];function re(e,t,n,r,i,u){return e.dataKind.term?((0,a.wg)(),(0,a.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon),{class:"h-5 w-5"}))],8,ne)):(0,a.kq)("",!0)}var ae,ie,ue=n(31085),oe=n(36503),le=n(43820),se=n(13922),ce=n(71756),pe=(ae={},(0,V.Z)(ae,ce.XV.GeneralDateTimeDescription.value,"Time description"),(0,V.Z)(ae,ce.fK.GeoCoordinates.value,"Geographic coordinates"),(0,V.Z)(ae,ce.fK.GeoShape.value,"Geographic shape"),ae),de=(ie={},(0,V.Z)(ie,ce.XV.GeneralDateTimeDescription.value,ue.Z),(0,V.Z)(ie,ce.fK.GeoCoordinates.value,oe.Z),(0,V.Z)(ie,ce.fK.GeoShape.value,le.Z),ie),me=(0,a.aZ)({name:"ScaleOfMeasureIcon",props:{dataKind:{required:!0}},computed:{dataKindType:function(){return this.dataKind.out(ce.E_.type).term},label:function(){return pe[this.dataKindType.value]||this.dataKind.term.value},icon:function(){return de[this.dataKindType.value]||se.Z}}}),fe=n(83744);const ve=(0,fe.Z)(me,[["render",re]]);var ge=ve,be={class:"mb-4 flex flex-col gap-2"},he=(0,a.Uk)(" Add filter "),we=(0,a._)("button",{type:"submit",class:"button-primary self-end"}," Apply filters ",-1);function ye(e,t,n,i,u,o){var l=(0,a.up)("dimension-filter"),s=(0,a.up)("plus-icon");return(0,a.wg)(),(0,a.iD)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"])),class:""},[(0,a._)("div",be,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filtersData,(function(t,n){return(0,a.wg)(),(0,a.j4)(l,{key:n,cube:e.cube,dimension:e.dimension,language:e.language,labels:e.labels,filter:t.value,"onUpdate:filter":function(e){return t.value=e}},null,8,["cube","dimension","language","labels","filter","onUpdate:filter"])})),128)),(0,a._)("button",{type:"button",onClick:t[0]||(t[0]=function(){return e.addFilter&&e.addFilter.apply(e,arguments)}),class:"button-text justify-end"},[(0,a.Wm)(s,{class:"w-5 h-5"}),he])]),we],32)}n(57327);var xe=n(9544),De={class:"flex items-center gap-2"},ke=["term"],Ze={key:1,class:"text-gray-500"},_e={key:1,class:"text-gray-500"},Ce={key:1};function Se(e,t,n,r,i,u){var o=(0,a.up)("SelectBox"),l=(0,a.up)("term-display"),c=(0,a.up)("term-input");return(0,a.wg)(),(0,a.iD)("fieldset",De,[(0,a.Wm)(o,{modelValue:e.filter.operation,"onUpdate:modelValue":e.updateOperation,options:e.operations},{button:(0,a.w5)((function(e){var t=e.selected;return[t?((0,a.wg)(),(0,a.iD)("span",{key:0,term:t.term},(0,s.zw)(t.label),9,ke)):((0,a.wg)(),(0,a.iD)("span",Ze,"Operation"))]})),_:1},8,["modelValue","onUpdate:modelValue","options"]),e.dimension.in&&e.dimension.in.length>0?((0,a.wg)(),(0,a.j4)(o,{key:0,modelValue:e.filter.arg,"onUpdate:modelValue":e.updateArg,options:e.dimension.in},{button:(0,a.w5)((function(t){var n=t.selected;return[n?((0,a.wg)(),(0,a.j4)(l,{key:0,term:e.resourceLabel(n),base:e.cube.term.value},null,8,["term","base"])):((0,a.wg)(),(0,a.iD)("span",_e,"Value"))]})),option:(0,a.w5)((function(t){var n=t.option;return[(0,a.Wm)(l,{term:e.resourceLabel(n),base:e.cube.term.value},null,8,["term","base"])]})),_:1},8,["modelValue","onUpdate:modelValue","options"])):((0,a.wg)(),(0,a.iD)("div",Ce,[(0,a.Wm)(c,{placeholder:"Value",modelValue:e.filter.arg,"onUpdate:modelValue":e.updateArg,datatype:e.dimension.datatype},null,8,["modelValue","onUpdate:modelValue","datatype"])]))])}var Ue={key:0},qe={key:1,class:"text-gray-500"};function Ve(e,t,n,r,i,u){var o=(0,a.up)("chevron-down-icon"),l=(0,a.up)("ListboxButton"),c=(0,a.up)("check-icon"),p=(0,a.up)("ListboxOption"),d=(0,a.up)("ListboxOptions"),m=(0,a.up)("Listbox");return(0,a.wg)(),(0,a.j4)(m,{modelValue:e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t)}),as:"div",class:"relative"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"button hover:bg-white pr-2"},{default:(0,a.w5)((function(){return[(0,a.WI)(e.$slots,"button",{selected:e.modelValue},(function(){var t;return[e.modelValue?((0,a.wg)(),(0,a.iD)("span",Ue,(0,s.zw)(null===(t=e.modelValue)||void 0===t?void 0:t.label),1)):((0,a.wg)(),(0,a.iD)("span",qe,"Select"))]})),(0,a.Wm)(o,{class:"w-5 h-5 text-gray-500"})]})),_:3}),(0,a.Wm)(d,{class:"absolute z-10 min-w-full border rounded-md shadow-md bg-white max-h-80 overflow-y-auto outline-none"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(function(t,n){return(0,a.wg)(),(0,a.j4)(p,{key:n,value:t,as:"template"},{default:(0,a.w5)((function(n){var r=n.active,i=n.selected;return[(0,a._)("button",{class:(0,s.C_)(["w-full p-2 flex items-center gap-1",{"bg-blue-50":r}])},[(0,a.Wm)(c,{class:(0,s.C_)(["w-5 h-5",{invisible:!i}])},null,8,["class"]),(0,a.WI)(e.$slots,"option",{option:t},(function(){return[(0,a.Uk)((0,s.zw)(t.label),1)]}))],2)]})),_:2},1032,["value"])})),128))]})),_:3})]})),_:3},8,["modelValue"])}var Oe=n(71315),Pe=(0,a.aZ)({name:"SelectBox",components:{CheckIcon:Oe.Z,ChevronDownIcon:Q.Z,Listbox:G.Ri,ListboxButton:G.Y4,ListboxOptions:G.O_,ListboxOption:G.wt},props:{options:{type:Array,required:!0},modelValue:{}},emits:["update:modelValue"]});const Le=(0,fe.Z)(Pe,[["render",Ve]]);var We=Le,Ke=n(99397),Ie=["value"];function je(e,t,n,r,i,u){var o;return(0,a.wg)(),(0,a.iD)("input",{type:"text",value:null===(o=e.modelValue)||void 0===o?void 0:o.value,onChange:t[0]||(t[0]=function(){return e.update&&e.update.apply(e,arguments)})},null,40,Ie)}var Re=(0,a.aZ)({name:"TermInput",props:{modelValue:{type:N.Term,required:!1},datatype:{type:N.Term,required:!1}},emits:["update:modelValue"],methods:{update:function(e){var t=e.target.value,n=t?z.ZP.literal(t,this.datatype):null;this.$emit("update:modelValue",n)}}});const ze=(0,fe.Z)(Re,[["render",je]]);var Te=ze,Me=[{term:ce.ei.Eq,label:"="},{term:ce.ei.Ne,label:"!="},{term:ce.ei.In,label:"in"},{term:ce.ei.Lt,label:"<"},{term:ce.ei.Lte,label:"<="},{term:ce.ei.Gt,label:">"},{term:ce.ei.Gte,label:">="}],He=(0,a.aZ)({name:"DimensionFilters",components:{SelectBox:We,TermDisplay:Ke.Z,TermInput:Te},props:{cube:{type:R.Cube,required:!0},dimension:{type:R.CubeDimension,required:!0},filter:{type:Object,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},emits:["update:filter"],computed:{operations:function(){return Me}},methods:{updateOperation:function(e){this.$emit("update:filter",(0,O.Z)((0,O.Z)({},this.filter),{},{operation:e}))},updateArg:function(e){this.$emit("update:filter",(0,O.Z)((0,O.Z)({},this.filter),{},{arg:e}))},resourceLabel:function(e){var t;return(null===(t=this.labels)||void 0===t?void 0:t.node(e).out(ce.fK.name,{language:this.language}).term)||this.cube.ptr.node(e).out(ce.fK.name,{language:this.language}).term||e}}});const Ye=(0,fe.Z)(He,[["render",Se]]);var Ae=Ye,Fe=(0,a.aZ)({name:"DimensionFilters",components:{DimensionFilter:Ae,PlusIcon:xe.Z},props:{cube:{type:R.Cube,required:!0},dimension:{type:R.CubeDimension,required:!0},filters:{type:Array,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},emits:["update:filters"],setup:function(e){var t=(0,l.BK)(e),n=t.filters,r=(0,l.iH)(n.value.map((function(e){return{value:e}})));return{filtersData:r}},methods:{submit:function(){var e=this.filtersData.map((function(e){var t=e.value;return t})).filter((function(e){var t=e.operation,n=e.arg;return t&&n}));this.$emit("update:filters",e)},addFilter:function(){this.filtersData.push({value:{dimension:this.dimension,operation:null,arg:null}})}}});const Ee=(0,fe.Z)(Fe,[["render",ye]]);var Be=Ee,$e={class:"flex-grow flex items-center justify-end"};function Ne(e,t,n,r,i,u){var o=(0,a.up)("information-circle-icon"),l=(0,a.up)("resource-details-dialog");return(0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("button",{onClick:t[0]||(t[0]=function(t){return e.isOpen=!0}),title:"Dimension Metadata"},[(0,a.Wm)(o,{class:"text-gray-500 w-5 h-5"})]),(0,a.Wm)(l,{title:"Dimension Metadata",resource:this.dimension.ptr,"is-open":e.isOpen,onClose:t[1]||(t[1]=function(t){return e.isOpen=!1})},null,8,["resource","is-open"])])}var Ge={class:"flex items-center justify-center min-h-screen px-4"},Xe={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"},Je={class:"pr-4 text-left font-semibold pb-2"},Qe={class:"pb-2"};function et(e,t,n,r,i,u){var o=(0,a.up)("dialog-overlay"),l=(0,a.up)("x-circle-icon"),c=(0,a.up)("dialog-title"),p=(0,a.up)("term-display"),d=(0,a.up)("Dialog");return(0,a.wg)(),(0,a.j4)(d,{open:e.isOpen,onClose:t[1]||(t[1]=function(t){return e.$emit("close")}),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,a.w5)((function(){return[(0,a._)("div",Ge,[(0,a.Wm)(o,{class:"fixed inset-0 bg-black opacity-40"}),(0,a._)("div",Xe,[(0,a.Wm)(c,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,s.zw)(e.title)+" ",1),(0,a._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})},[(0,a.Wm)(l,{class:"h-6 w-6"})])]})),_:1}),(0,a._)("table",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.properties,(function(e){var t=(0,P.Z)(e,2),n=t[0],r=t[1];return(0,a.wg)(),(0,a.iD)("tr",{key:n.value,class:"align-top"},[(0,a._)("th",Je,[(0,a.Wm)(p,{term:n},null,8,["term"])]),(0,a._)("td",Qe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r,(function(e,t){return(0,a.wg)(),(0,a.iD)("p",{key:t},[e?((0,a.wg)(),(0,a.j4)(p,{key:0,term:e,"show-language":""},null,8,["term"])):(0,a.kq)("",!0)])})),128))])])})),128))])])])]})),_:1},8,["open"])}n(4723);var tt=n(85717),nt=(0,a.aZ)({name:"DimensionMetadata",components:{Dialog:G.Vq,DialogOverlay:G.t9,DialogTitle:G.$N,TermDisplay:Ke.Z,XCircleIcon:K.Z},props:{title:{type:String,required:!0},resource:{type:tt.Clownface,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close"],computed:{properties:function(){var e=this.resource,t=z.ZP.termSet((0,q.Z)(e.dataset.match(e.term)).map((function(e){var t=e.predicate;return t})));return(0,q.Z)(t).map((function(t){return[t,e.out(t).terms]}))}}});const rt=(0,fe.Z)(nt,[["render",et]]);var at=rt,it=(0,a.aZ)({name:"DimensionMetadata",components:{InformationCircleIcon:W.Z,ResourceDetailsDialog:at},props:{dimension:{type:R.CubeDimension,required:!0}},data:function(){return{isOpen:!1}}});const ut=(0,fe.Z)(it,[["render",Ne]]);var ot=ut,lt=["title"];function st(e,t,n,r,i,u){return e.scaleOfMeasure.term?((0,a.wg)(),(0,a.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon),{class:"h-5 w-5"}))],8,lt)):(0,a.kq)("",!0)}n(47042),n(23123);var ct,pt=n(26505),dt=n(56271),mt=n(62251),ft=n(74563),vt=(ct={},(0,V.Z)(ct,ce.wY.NominalScale.value,ft.Z),(0,V.Z)(ct,ce.wY.OrdinalScale.value,pt.Z),(0,V.Z)(ct,ce.wY.IntervalScale.value,dt.Z),(0,V.Z)(ct,ce.wY.RatioScale.value,mt.Z),ct),gt=(0,a.aZ)({name:"ScaleOfMeasureIcon",props:{scaleOfMeasure:{required:!0}},computed:{label:function(){var e,t;return null!==(e=null===(t=this.scaleOfMeasure)||void 0===t?void 0:t.value.split("/").slice(-1)[0])&&void 0!==e?e:""},icon:function(){var e,t,n=null!==(e=null===(t=this.scaleOfMeasure)||void 0===t?void 0:t.value)&&void 0!==e?e:"";return vt[n]||se.Z}}});const bt=(0,fe.Z)(gt,[["render",st]]);var ht=bt,wt=(0,a.aZ)({name:"DimensionHeader",components:{AnnotationIcon:X.Z,ChevronDownIcon:Q.Z,ChevronUpIcon:ee.Z,DataKindIcon:ge,DimensionFilters:Be,DimensionMetadata:ot,FilterIcon:J.Z,LinkIcon:te.Z,Popover:G.J2,PopoverButton:G.O7,PopoverPanel:G.Hi,ScaleTypeIcon:ht},props:{cube:{type:R.Cube,required:!0},dimension:{type:R.CubeDimension,required:!0},language:{type:[Array,String],required:!0},labels:{type:Object,required:!1},sortDimension:{type:R.CubeDimension,default:null},sortDirection:{type:N.Term,required:!0},filters:{type:Array,required:!0}},emits:["updateSort","update:filters"],computed:{label:function(){return this.dimension.out(ce.fK.name,{language:this.language}).value},description:function(){return this.dimension.out(ce.fK.comment,{language:this.language}).value},property:function(){return this.dimension.out(ce.sh.path).value},isMeasure:function(){return!!this.dimension.ptr.has(ce.E_.type,ce.kO.MeasureDimension).term},isKey:function(){return!!this.dimension.ptr.has(ce.E_.type,ce.kO.KeyDimension).term},isShared:function(){return!!this.dimension.ptr.has(ce.E_.type,ce.kO.SharedDimension).term},dataKind:function(){return this.dimension.out(ce.$y.dataKind)},scaleType:function(){return this.dimension.out(ce.wY.scaleType)},isSortDimension:function(){return this.sortDimension&&this.dimension.path.equals(this.sortDimension.path)},isSortAscending:function(){return ce.ei.Ascending.equals(this.sortDirection)},isSortDescending:function(){return ce.ei.Descending.equals(this.sortDirection)}},methods:{updateSort:function(){var e=this.isSortDimension?yt(this.sortDirection):ce.ei.Ascending;this.$emit("updateSort",this.dimension,e)}}});function yt(e){return ce.ei.Ascending.equals(e)?ce.ei.Descending:ce.ei.Ascending}const xt=(0,fe.Z)(wt,[["render",$]]);var Dt=xt,kt=n(68736),Zt=n(84269),_t=(n(9653),{class:"flex items-center gap-8"}),Ct={class:"flex items-center gap-1"},St=["disabled"],Ut=["disabled"],qt=(0,a._)("span",null,"Page ",-1),Vt=["value"],Ot=(0,a._)("span",null," of ",-1),Pt=["title"],Lt={key:2},Wt=["disabled"],Kt=["value"];function It(e,t,n,r,i,u){var o=(0,a.up)("chevron-double-left-icon"),l=(0,a.up)("chevron-left-icon"),c=(0,a.up)("loading-icon"),p=(0,a.up)("exclamation-circle-icon"),d=(0,a.up)("chevron-right-icon"),m=(0,a.up)("chevron-double-right-icon");return(0,a.wg)(),(0,a.iD)("div",_t,[(0,a._)("div",Ct,[(0,a._)("button",{onClick:t[0]||(t[0]=function(t){return e.updatePage(1)}),title:"First page",class:"button px-2",disabled:1===e.page},[(0,a.Wm)(o,{class:"w-6 h-6"})],8,St),(0,a._)("button",{onClick:t[1]||(t[1]=function(t){return e.updatePage(e.page-1)}),title:"Previous page",class:"button px-2",disabled:1===e.page},[(0,a.Wm)(l,{class:"w-6 h-6"})],8,Ut),qt,(0,a._)("input",{type:"text",inputmode:"numeric",value:e.page,onChange:t[2]||(t[2]=function(t){return e.updatePage(t.target.value)}),class:"w-14 text-right"},null,40,Vt),Ot,e.itemsCount.isLoading?((0,a.wg)(),(0,a.j4)(c,{key:0})):e.itemsCount.error?((0,a.wg)(),(0,a.iD)("span",{key:1,class:"text-red-500",title:e.itemsCount.error},[(0,a.Wm)(p,{class:"w-5 h-5"})],8,Pt)):((0,a.wg)(),(0,a.iD)("span",Lt,(0,s.zw)(e.pagesCount),1)),(0,a._)("button",{onClick:t[3]||(t[3]=function(t){return e.updatePage(e.page+1)}),title:"Next page",class:"button px-2"},[(0,a.Wm)(d,{class:"w-6 h-6"})]),(0,a._)("button",{onClick:t[4]||(t[4]=function(t){return e.updatePage(e.pagesCount)}),title:"Last page",class:"button px-2",disabled:!e.pagesCount||e.page===e.pagesCount},[(0,a.Wm)(m,{class:"w-6 h-6"})],8,Wt)]),(0,a._)("select",{value:e.pageSize,onChange:t[5]||(t[5]=function(t){return e.$emit("update:pageSize",Number(t.target.value))}),title:"Items per page"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pageSizes,(function(e){return(0,a.wg)(),(0,a.iD)("option",{key:e},(0,s.zw)(e),1)})),128))],40,Kt)])}var jt=n(35482),Rt=n(49746),zt=n(93434),Tt=n(91461),Mt=n(6677),Ht=["10","20","50","100"],Yt=(0,a.aZ)({name:"PaginationMenu",components:{ChevronDoubleLeftIcon:jt.Z,ChevronDoubleRightIcon:Rt.Z,ChevronLeftIcon:zt.Z,ChevronRightIcon:Tt.Z,ExclamationCircleIcon:Mt.Z,LoadingIcon:kt.Z},props:{page:{type:Number,required:!0},pageSize:{type:Number,required:!0},itemsCount:{type:Object,required:!0}},emits:["update:page","update:pageSize"],setup:function(e){var t=(0,l.BK)(e),n=t.itemsCount,r=t.pageSize,i=(0,a.Fl)((function(){return n.value.isLoading||n.value.error?null:Math.ceil(n.value.data/r.value)}));return{pagesCount:i,pageSizes:Ht}},methods:{updatePage:function(e){var t=Number(e);isNaN(t)||this.$emit("update:page",t)}}});const At=(0,fe.Z)(Yt,[["render",It]]);var Ft=At,Et=n(14734),Bt="*",$t=10,Nt=(0,a.aZ)({name:"CubeViewer",components:{DimensionHeader:Dt,InformationCircleIcon:W.Z,LoadingIcon:kt.Z,ObservationValue:Zt["default"],PaginationMenu:Ft,ResourceDetailsDialog:at,XCircleIcon:K.Z},props:{source:{type:R.Source,required:!0},cubeUri:{type:String,required:!0},language:{type:[String,Array],required:!1}},setup:function(e){var t=(0,l.BK)(e),n=t.source,r=t.cubeUri,i=(0,l.XI)(Et.V_()),u=(0,l.XI)(null),o=(0,l.iH)(new Map),s=(0,l.iH)(1),c=(0,l.iH)($t),p=(0,l.XI)(null),d=(0,l.XI)(ce.ei.Ascending),m=(0,l.iH)(Et.V_()),f=(0,l.iH)(Et.V_()),v=j()(1),g=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(){var t,a,l,s,c,p,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"function"===typeof(null===(t=i.value)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.clear)&&i.value.data.clear(),i.value=Et.V_(),u.value=null,o.value=new Map,y.value={},m.value=Et.V_(),f.value=Et.V_(),e.prev=7,e.next=10,n.value.cube(r.value);case 10:l=e.sent,l?(i.value=Et.CL(l),u.value=R.CubeSource.fromSource(n.value,l),o.value=new Map(l.dimensions.map((function(e){return[e.path.value,[]]})))):("function"===typeof(null===(s=i.value)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.clear)&&i.value.data.clear(),i.value=Et.vU("Could not find cube ".concat(r.value))),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](7),console.error(e.t0),"function"===typeof(null===(p=i.value)||void 0===p||null===(d=p.data)||void 0===d?void 0:d.clear)&&i.value.data.clear(),i.value=Et.vU(e.t0);case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();(0,a.bv)(g),(0,a.YP)(r,g);var b=(0,l.XI)(null),h=function(){i.value.data&&(b.value&&b.value.clear(),b.value=Gt(i.value.data,s.value,c.value,o.value,p.value,d.value))};(0,a.YP)([i,s,c,p,d,o],h);var w=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(m.value=Et.V_(),b.value){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,v.add((0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Et.he(b.value.observations.bind(b.value));case 2:m.value=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 5:return e.next=7,v.add((0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Et.he(b.value.observationCount.bind(b.value));case 2:f.value=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.bv)(w),(0,a.YP)(b,w);var y=(0,l.iH)({}),x=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y.value={},b.value&&u.value){e.next=3;break}return e.abrupt("return");case 3:return t=b.value.dimensions,e.next=6,Promise.all(t.map((function(e){return v.add((0,L.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Xt(e,u.value));case 1:case"end":return t.stop()}}),t)}))))})));case 6:n=e.sent,y.value=n.reduce((function(e,t){var n=(0,P.Z)(t,2),r=n[0],a=n[1];return(0,O.Z)((0,O.Z)({},e),{},(0,V.Z)({},r.value,a))}),{});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.YP)(b,x);var D=(0,l.iH)(!1);return{cube:i,page:s,pageSize:c,sortDimension:p,sortDirection:d,filters:o,cubeSource:u,cubeView:b,observations:m,observationCount:f,isCubeMetadataOpen:D,labels:y,prepareCubeView:h}},computed:{displayLanguage:function(){var e;return null!==(e=this.language)&&void 0!==e?e:Bt},title:function(){var e=this.cube.data.out(ce.fK.name,{language:this.displayLanguage}).value;return null!==e&&void 0!==e?e:null},description:function(){var e=this.cube.data.out(ce.fK.description,{language:this.displayLanguage}).value;return null!==e&&void 0!==e?e:null},filtersSummary:function(){var e=this,t=this.displayLanguage,n=this.cube.data;return(0,q.Z)(this.filters.entries()).flatMap((function(r){var a=(0,P.Z)(r,2),i=a[0],u=a[1];return u.map((function(r,a){var u=r.dimension,o=r.operation,l=r.arg,s=u.out(ce.fK.name,{language:t}).value,c=e.labels[u.path.value],p=(null===c||void 0===c?void 0:c.node(l).out(ce.fK.name,{language:t}).value)||n.ptr.node(l).out(ce.fK.name,{language:t}).value||ce.Fi(l.value,e.cube.data.term.value);return{dimensionPath:i,index:a,label:"".concat(s," ").concat(o.label," ").concat(p)}}))}))}},methods:{isNumericScale:function(e){var t=e.out(ce.wY.scaleType).term;return ce.wY.RatioScale.equals(t)||ce.wY.IntervalScale.equals(t)},isMeasureDimension:function(e){return!!e.ptr.has(ce.E_.type,ce.kO.MeasureDimension).term},updateSort:function(e,t){this.sortDimension=e,this.sortDirection=t},updateDimensionFilters:function(e,t){this.filters.set(e.path.value,t),this.prepareCubeView()},removeFilter:function(e){var t=e.dimensionPath,n=e.index;this.filters.get(t).splice(n,1),this.prepareCubeView()}}});function Gt(e,t,n,r,a,i){var u=R.View.fromCube(e);u.ptr.addOut(ce.ei.projection,(function(e){var r=(t-1)*n;if(e.addOut(ce.ei.limit,n),e.addOut(ce.ei.offset,r),a){var o=u.dimension({cubeDimension:a.path}),l=e.blankNode().addOut(ce.ei.dimension,o.ptr).addOut(ce.ei.direction,i);e.addList(ce.ei.orderBy,l)}}));var o,l=(0,q.Z)(r.entries()).map((function(e){var t=(0,P.Z)(e,2),n=t[0],r=t[1];return r.map((function(e){var t=e.operation,r=e.arg,a=u.dimension({cubeDimension:n});return new R.Filter({dimension:a,operation:t.term,arg:r})}))})),s=(0,U.Z)(l);try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addFilter(c)}}catch(p){s.e(p)}finally{s.f()}return u}var Xt=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,o,l,s,c,p,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.cubeDimensions[0],a=r.path,i=z.ZP.clownface({dataset:z.ZP.dataset()}),!ce.sh.IRI.equals(r.out(ce.sh.nodeKind).term)){e.next=13;break}return u=new R.View({parent:n}),o=R.LookupSource.fromSource(n),u.addDimension(t),u.addDimension(u.createDimension({source:o,path:ce.fK.name,join:t,as:ce.fK.name})),e.next=10,u.observations();case 10:l=e.sent,s=(0,U.Z)(l);try{for(s.s();!(c=s.n()).done;)p=c.value,d=p[a.value],m=p[ce.fK.name.value],i.node(d).addOut(ce.fK.name,m)}catch(f){s.e(f)}finally{s.f()}case 13:return e.abrupt("return",[a,i]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();const Jt=(0,fe.Z)(Nt,[["render",S]]);var Qt=Jt,en={class:"p-3 bg-white shadow-lg flex justify-between items-center"},tn={class:"form-field"},nn=(0,a._)("span",{class:"label"},"Endpoint URL",-1),rn={class:"form-field"},an=(0,a._)("span",{class:"label"},"Username",-1),un={class:"form-field"},on=(0,a._)("span",{class:"label"},"Password",-1),ln={class:"form-field"},sn=(0,a._)("span",{class:"label"},"Source graph",-1),cn={class:"flex justify-between"},pn=["disabled"],dn={class:"flex items-end gap-2"},mn=(0,a.Uk)(" Endpoint config ");function fn(e,t,n,i,u,o){var l=(0,a.up)("x-circle-icon"),c=(0,a.up)("cube-selector"),p=(0,a.up)("cog-icon"),d=(0,a.up)("select-box"),m=(0,a.up)("share-url-button");return(0,a.wg)(),(0,a.iD)("div",en,[e.open?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:t[5]||(t[5]=(0,r.iM)((function(){return e.updateSource&&e.updateSource.apply(e,arguments)}),["prevent"])),class:"w-1/3 flex flex-col gap-2"},[(0,a._)("label",tn,[nn,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.options.endpointUrl=t})},null,512),[[r.nr,e.options.endpointUrl]])]),(0,a._)("label",rn,[an,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.options.user=t})},null,512),[[r.nr,e.options.user]])]),(0,a._)("label",un,[on,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.options.password=t})},null,512),[[r.nr,e.options.password]])]),(0,a._)("label",ln,[sn,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.options.sourceGraph=t})},null,512),[[r.nr,e.options.sourceGraph]])]),(0,a._)("div",cn,[(0,a._)("button",{type:"submit",class:"button-primary",disabled:!e.isValid}," Fetch cubes ",8,pn),(0,a._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[4]||(t[4]=function(t){return e.open=!1})},[(0,a.Wm)(l,{class:"h-6 w-6"})])])],32)):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",dn,[e.source?((0,a.wg)(),(0,a.j4)(c,{key:0,source:e.source,"cube-uri":e.cubeUri,onSelect:t[6]||(t[6]=function(t){return e.$emit("update:cubeUri",t)})},null,8,["source","cube-uri"])):(0,a.kq)("",!0),(0,a._)("button",{class:"button",onClick:t[7]||(t[7]=function(t){return e.open=!0})},[(0,a.Wm)(p,{class:"h-4 w-4"}),mn]),(0,a.Wm)(d,{options:e.languages,"model-value":e.language[0],"onUpdate:modelValue":e.updateLanguage},{button:(0,a.w5)((function(e){var t=e.selected;return[(0,a.Uk)((0,s.zw)(t),1)]})),option:(0,a.w5)((function(e){var t=e.option;return[(0,a.Uk)((0,s.zw)(t),1)]})),_:1},8,["options","model-value","onUpdate:modelValue"])],512),[[r.F8,!e.open]]),e.source&&e.cubeUri?((0,a.wg)(),(0,a.j4)(m,{key:1,source:e.source,cubeUri:e.cubeUri},null,8,["source","cubeUri"])):(0,a.kq)("",!0)])}var vn=n(14618),gn={key:0,class:"p-2 flex items-center gap-2"},bn=(0,a.Uk)(" Loading cubes... "),hn={key:1,class:"p-2 text-red-500"},wn=["value"],yn=(0,a._)("option",null,"Select cube",-1),xn=["value"];function Dn(e,t,n,r,i,u){var o=(0,a.up)("loading-icon");return e.cubes.isLoading?((0,a.wg)(),(0,a.iD)("div",gn,[(0,a.Wm)(o),bn])):e.cubes.error?((0,a.wg)(),(0,a.iD)("div",hn,(0,s.zw)(e.cubes.error),1)):((0,a.wg)(),(0,a.iD)("select",{key:2,value:e.cubeUri,onChange:t[0]||(t[0]=function(){return e.onSelect&&e.onSelect.apply(e,arguments)})},[yn,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cubes.data,(function(e){return(0,a.wg)(),(0,a.iD)("option",{key:e.term.value,value:e.term.value},(0,s.zw)(e.term.value),9,xn)})),128))],40,wn))}var kn=(0,a.aZ)({name:"CubeSelector",components:{LoadingIcon:kt.Z},props:{source:{type:R.Source,required:!0},cubeUri:String},emits:["select"],setup:function(e){var t=(0,l.BK)(e),n=t.source,r=(0,l.iH)(Et.V_()),i=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.value=Et.V_(),e.next=3,Et.he((0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.value.cubes({noShape:!0,filters:[R.Cube.filter.noValidThrough(),R.Cube.filter.noExpires()]}));case 1:case"end":return e.stop()}}),e)}))));case 3:r.value=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.bv)(i),(0,a.YP)(n,i),{cubes:r}},methods:{onSelect:function(e){this.$emit("select",e.target.value)}}});const Zn=(0,fe.Z)(kn,[["render",Dn]]);var _n=Zn,Cn=["value"],Sn={class:"text-sm text-green-500"};function Un(e,t,n,i,u,o){var l=(0,a.up)("share-icon"),s=(0,a.up)("PopoverButton"),c=(0,a.up)("PopoverPanel"),p=(0,a.up)("Popover");return(0,a.wg)(),(0,a.j4)(p,{class:"relative"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{class:"button",title:"Share"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"w-5 h-5"})]})),_:1}),(0,a.Wm)(c,{class:"absolute right-0 z-10 border bg-white p-2"},{default:(0,a.w5)((function(){return[(0,a._)("input",{type:"text",ref:"urlInput",value:e.shareUrl,readonly:"",onFocus:t[0]||(t[0]=function(){return e.copyShareUrl&&e.copyShareUrl.apply(e,arguments)})},null,40,Cn),(0,a.wy)((0,a._)("span",Sn," Copied to clipboard ",512),[[r.F8,e.isCopied]])]})),_:1})]})),_:1})}n(60285),n(39714);var qn=n(97395),Vn=(0,a.aZ)({name:"ShareUrlButton",components:{Popover:G.J2,PopoverButton:G.O7,PopoverPanel:G.Hi,ShareIcon:qn.Z},props:{source:{type:R.Source,required:!0},cubeUri:{type:String,required:!0}},setup:function(e){var t=(0,l.BK)(e),n=t.cubeUri,r=t.source,i=(0,l.iH)(""),u=function(){var e,t,a,u,o,l,s,c=new URL(window.location.href);c.searchParams.set("cube",null!==(e=n.value)&&void 0!==e?e:""),c.searchParams.set("endpointUrl",null!==(t=null===(a=r.value.endpoint)||void 0===a?void 0:a.value)&&void 0!==t?t:""),c.searchParams.set("user",null!==(u=r.value.user)&&void 0!==u?u:""),c.searchParams.set("password",null!==(o=r.value.password)&&void 0!==o?o:""),c.searchParams.set("sourceGraph",null!==(l=null===(s=r.value.graph)||void 0===s?void 0:s.value)&&void 0!==l?l:""),i.value=c.toString()};(0,a.bv)(u),(0,a.YP)(n,u);var o=(0,l.iH)(!1),s=function(){var e=(0,L.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(i.value);case 2:o.value=!0,setTimeout(c,2e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){o.value=!1};return{shareUrl:i,isCopied:o,copyShareUrl:s,resetCopied:c}}});const On=(0,fe.Z)(Vn,[["render",Un]]);var Pn=On,Ln=["de","fr","it","rm","en"],Wn=(0,a.aZ)({name:"SourceConfig",components:{CogIcon:vn.Z,CubeSelector:_n,SelectBox:We,ShareUrlButton:Pn,XCircleIcon:K.Z},props:{source:{type:R.Source,required:!1},cubeUri:{type:String,required:!1},language:{type:[Array,String],required:!1}},emits:["update:source","update:cubeUri","update:language"],setup:function(e){var t,n,r=(0,l.BK)(e),a=r.source,i=a.value?{endpointUrl:null===(t=a.value.endpoint)||void 0===t?void 0:t.value,user:a.value.user,password:a.value.password,sourceGraph:null===(n=a.value.graph)||void 0===n?void 0:n.value}:{endpointUrl:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_ENDPOINT_URL},u=(0,l.iH)(i),o=(0,l.iH)(!a.value);return{options:u,open:o,languages:Ln}},computed:{isValid:function(){return this.options.endpointUrl}},methods:{updateSource:function(){if(this.isValid){var e=new R.Source(this.options);this.$emit("update:source",e),this.open=!1}},updateLanguage:function(e){var t=[e].concat(Ln,["*"]);this.$emit("update:language",t)}}});const Kn=(0,fe.Z)(Wn,[["render",fn]]);var In=Kn,jn=["en","*"],Rn=(0,a.aZ)({name:"App",components:{CubeViewer:Qt,SourceConfig:In},setup:function(){var e=new URLSearchParams(window.location.search.substring(1)),t=(0,l.iH)(null),n=e.get("endpointUrl");n&&(t.value=new R.Source({endpointUrl:n,user:e.get("user")||void 0,password:e.get("password")||void 0,sourceGraph:e.get("sourceGraph")||void 0}));var r=(0,l.iH)(e.get("cube")),a=(0,l.iH)(jn);return{source:t,cubeUri:r,language:a}}});const zn=(0,fe.Z)(Rn,[["render",o]]);var Tn=zn,Mn=(0,r.ri)(Tn);Mn.mount("#app")},71756:function(e,t,n){"use strict";n.d(t,{$y:function(){return o},E_:function(){return s},Fi:function(){return f},XV:function(){return d},ei:function(){return m},fK:function(){return c},kO:function(){return u},sh:function(){return p},wY:function(){return l}});n(26699),n(32023),n(23157),n(74916),n(15306);var r=n(2518),a=n(74919),i=(n(34667),n(52083)),u=i.ZP.namespace("https://cube.link/"),o=i.ZP.namespace("https://cube.link/meta/"),l=i.ZP.namespace(r.Z.qudt),s=i.ZP.namespace(r.Z.rdf),c=i.ZP.namespace(r.Z.schema),p=i.ZP.namespace(r.Z.sh),d=i.ZP.namespace(r.Z.time),m=i.ZP.namespace("https://cube.link/view/");function f(e,t){return t&&e.startsWith(t)?e.replace(t,"").replace(/^[/#]/,""):(0,a.F)(e)||e}},14734:function(e,t,n){"use strict";n.d(t,{CL:function(){return i},V_:function(){return a},he:function(){return o},vU:function(){return u}});var r=n(48534);n(35666);function a(){return{isLoading:!0,data:null,error:null}}function i(e){return{isLoading:!1,data:e,error:null}}function u(e){return{isLoading:!1,data:null,error:e}}function o(e){return l.apply(this,arguments)}function l(){return l=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,e.abrupt("return",i(n));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",u(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),l.apply(this,arguments)}},84269:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(66252),a={key:0},i={key:2,class:"flex-grow flex items-center justify-end"};function u(e,t,n,u,o,l){var s=(0,r.up)("term-display"),c=(0,r.up)("resource-explorer");return e.value?"Literal"===e.value.termType?((0,r.wg)(),(0,r.j4)(s,{key:1,term:e.value,base:e.cube.term.value},null,8,["term","base"])):((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("button",{onClick:t[0]||(t[0]=function(t){return e.showResourceExplorer=!0}),class:"tag bg-gray-200 whitespace-nowrap"},[(0,r.Wm)(s,{term:e.resourceLabel,base:e.cube.term.value},null,8,["term","base"])]),(0,r.Wm)(c,{uri:e.value,cube:e.cube,"is-open":e.showResourceExplorer,onClose:t[1]||(t[1]=function(t){return e.showResourceExplorer=!1})},null,8,["uri","cube","is-open"])])):((0,r.wg)(),(0,r.iD)("span",a,"-"))}n(68309);var o=n(68825),l=n(96333),s={class:"flex items-center justify-center min-h-screen px-4"},c={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"};function p(e,t,n,a,i,u){var o=(0,r.up)("dialog-overlay"),l=(0,r.up)("x-circle-icon"),p=(0,r.up)("dialog-title"),d=(0,r.up)("resource-details"),m=(0,r.up)("Dialog");return(0,r.wg)(),(0,r.j4)(m,{open:e.isOpen,onClose:t[1]||(t[1]=function(t){return e.$emit("close")}),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,r.w5)((function(){return[(0,r._)("div",s,[(0,r.Wm)(o,{class:"fixed inset-0 bg-black opacity-40"}),(0,r._)("div",c,[(0,r.Wm)(p,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,r.w5)((function(){return[(0,r._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})},[(0,r.Wm)(l,{class:"h-6 w-6"})])]})),_:1}),(0,r.Wm)(d,{uri:e.uri,cube:e.cube},null,8,["uri","cube"])])])]})),_:1},8,["open"])}var d=n(23611),m=n(20277),f=n(56084),v=n(3577),g={class:"mb-4 whitespace-nowrap"},b=["href"],h={key:1,class:"text-red-500"},w=(0,r._)("h3",{class:"font-bold"},"Could not load resource",-1),y={key:2},x={class:"py-2 pr-4 font-semibold"},D={class:"py-2 flex flex-col gap-1"};function k(e,t,n,a,i,u){var o=(0,r.up)("external-link-icon"),l=(0,r.up)("loading-icon"),s=(0,r.up)("term-display"),c=(0,r.up)("observation-value");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("h2",g,[(0,r._)("a",{href:e.uri.value,target:"_blank",rel:"noopener",class:"group flex items-center gap-1"},[(0,r.Uk)((0,v.zw)(e.uri.value)+" ",1),(0,r.Wm)(o,{class:"w-4 h-4 invisible group-hover:visible"})],8,b)]),e.resource.isLoading?((0,r.wg)(),(0,r.j4)(l,{key:0})):e.resource.error?((0,r.wg)(),(0,r.iD)("section",h,[w,(0,r.Uk)(" "+(0,v.zw)(e.resource.error),1)])):((0,r.wg)(),(0,r.iD)("table",y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.properties,(function(t,n){var a=(0,f.Z)(t,2),i=a[0],u=a[1];return(0,r.wg)(),(0,r.iD)("tr",{key:n,class:"align-top"},[(0,r._)("td",x,[(0,r.Wm)(s,{term:i,base:e.cube.term.value},null,8,["term","base"])]),(0,r._)("td",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u,(function(t,n){return(0,r.wg)(),(0,r.iD)("p",{key:n},[(0,r.Wm)(c,{value:t,cube:e.cube},null,8,["value","cube"])])})),128))])])})),128))]))])}var Z=n(89584),_=n(48534),C=(n(35666),n(41539),n(78783),n(33948),n(21703),n(74916),n(4723),n(21249),n(2262)),S=n(43498),U=n(40805),q=n.n(U),V=n(52083),O=n(68736),P=n(99397),L=n(14734);V.ZP.formats["import"](q());var W=(0,r.aZ)({name:"ResourceDetails",components:{ExternalLinkIcon:S.Z,LoadingIcon:O.Z,ObservationValue:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,84269))})),TermDisplay:P.Z},props:{uri:{type:o.Term,required:!0},cube:{type:l.Cube,required:!0}},setup:function(e){var t=(0,C.BK)(e),n=t.uri,a=(0,C.iH)(L.V_()),i=function(){var e=(0,_.Z)(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.value,e.prev=1,e.next=4,V.ZP.fetch(t.value);case 4:if(r=e.sent,200!==r.status){e.next=12;break}return e.next=8,r.dataset();case 8:i=e.sent,a.value=L.CL(V.ZP.clownface({dataset:i,term:t})),e.next=13;break;case 12:throw new Error("".concat(r.status));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),a.value=L.vU(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();return(0,r.bv)(i),(0,r.YP)(n,i),{resource:a}},computed:{properties:function(){var e=this.resource.data;if(!e)return[];var t=(0,Z.Z)(e.dataset.match(e.term,null,null)),n=V.ZP.termSet(t.map((function(e){var t=e.predicate;return t})));return(0,Z.Z)(n).map((function(t){var n=e.out(t).terms;return[t,n]}))}}}),K=n(83744);const I=(0,K.Z)(W,[["render",k]]);var j=I,R=(0,r.aZ)({name:"ResourceExplorer",components:{Dialog:d.Vq,DialogOverlay:d.t9,DialogTitle:d.$N,ResourceDetails:j,XCircleIcon:m.Z},props:{isOpen:{type:Boolean,required:!0},uri:{type:o.Term,required:!0},cube:{type:l.Cube,required:!0}},emits:["close"]});const z=(0,K.Z)(R,[["render",p]]);var T=z,M=n(71756),H=(0,r.aZ)({name:"ObservationValue",components:{ResourceExplorer:T,TermDisplay:P.Z},props:{value:{type:o.Term,required:!0},cube:{type:l.Cube,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},data:function(){return{showResourceExplorer:!1}},computed:{isLiteral:function(){return this.value&&"Literal"===this.value.termType},resourceLabel:function(){var e;return(null===(e=this.labels)||void 0===e?void 0:e.node(this.value).out(M.fK.name,{language:this.language}).term)||this.cube.ptr.node(this.value).out(M.fK.name,{language:this.language}).term||this.value}}});const Y=(0,K.Z)(H,[["render",u]]);var A=Y},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(66252),a=n(3577),i=["title"],u={key:0,class:"text-gray-400"};function o(e,t,n,o,l,s){return(0,r.wg)(),(0,r.iD)("span",{title:e.expanded},[(0,r.Uk)((0,a.zw)(e.shrunk)+" ",1),e.showLanguage&&e.term.language?((0,r.wg)(),(0,r.iD)("span",u,"@"+(0,a.zw)(e.term.language),1)):(0,r.kq)("",!0)],8,i)}n(92222);var l=n(68825),s=n(71756),c=(0,r.aZ)({name:"TermDisplay",props:{term:{type:l.Term,required:!0},showLanguage:{type:Boolean,default:!1},base:String},computed:{shrunk:function(){return"NamedNode"===this.term.termType?s.Fi(this.term.value,this.base):this.term.value},expanded:function(){if("Literal"===this.term.termType){var e=this.term.datatype?"^^".concat(s.Fi(this.term.datatype.value)):"",t=this.term.language?"@".concat(this.term.language):"";return'"'.concat(this.term.value).concat(t,'"').concat(e)}return this.term.value}}}),p=n(83744);const d=(0,p.Z)(c,[["render",o]]);var m=d},68736:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(66252),a={class:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},i=(0,r._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u=(0,r._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),o=[i,u];function l(e,t){return(0,r.wg)(),(0,r.iD)("svg",a,o)}var s=n(83744);const c={},p=(0,s.Z)(c,[["render",l]]);var d=p},7716:function(){},53383:function(){},71156:function(){},45757:function(){},56965:function(){},70147:function(){},52361:function(){},94616:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,i){if(!r){var u=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],i=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&i||u>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(o=!1,i<u&&(u=i));if(o){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,u=r[0],o=r[1],l=r[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var c=l(n)}for(t&&t(r);s<u.length;s++)i=u[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self["webpackChunkcube_viewer"]=self["webpackChunkcube_viewer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(59920)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.3d123bfa.js.map