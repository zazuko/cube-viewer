(function(){var e={15825:function(e,t,a){"use strict";var n=a(49963),i=a(66252);const r={class:"w-full h-full p-4 flex flex-col gap-4"},o=(0,i._)("h1",{class:"font-bold text text-gray-600 uppercase"}," Zazuko Cube Viewer ",-1);function s(e,t,a,n,s,l){const u=(0,i.up)("source-config"),c=(0,i.up)("cube-viewer");return(0,i.wg)(),(0,i.iD)("div",r,[o,(0,i.Wm)(u,{source:e.source,"onUpdate:source":t[0]||(t[0]=t=>e.source=t),cubeUri:e.cubeUri,"onUpdate:cubeUri":t[1]||(t[1]=t=>e.cubeUri=t),language:e.language,"onUpdate:language":t[2]||(t[2]=t=>e.language=t)},null,8,["source","cubeUri","language"]),e.source&&e.cubeUri?((0,i.wg)(),(0,i.j4)(c,{key:0,source:e.source,cubeUri:e.cubeUri,language:e.language,class:"bg-white rounded shadow-lg overflow-x-auto"},null,8,["source","cubeUri","language"])):(0,i.kq)("",!0)])}var l=a(2262),u=a(3577);const c={class:"p-4"},p={key:0},d={key:1,class:"text-red-500"},m={key:2,class:"flex flex-col gap-4"},g=["title"],b={key:0},v={key:1,class:"text-gray-500"},f={key:0,class:"text-sm text-gray-700"},h={class:"h-1"},w=["colspan"],y={class:"flex gap-2 justify-start"},D=["onClick"],x={key:0},k=["colspan"],_={key:1},S=["colspan"],C={key:2};function Z(e,t,a,r,o,s){const l=(0,i.up)("loading-icon"),Z=(0,i.up)("information-circle-icon"),U=(0,i.up)("resource-details-dialog"),q=(0,i.up)("dimension-header"),V=(0,i.up)("x-circle-icon"),O=(0,i.up)("observation-value"),P=(0,i.up)("pagination-menu");return(0,i.wg)(),(0,i.iD)("div",c,[e.cube.isLoading?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(l)])):e.cube.error?((0,i.wg)(),(0,i.iD)("div",d,(0,u.zw)(e.cube.error),1)):((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("header",null,[(0,i._)("h1",{class:"font-bold mb-2",title:e.cube.data.term.value},[e.title?((0,i.wg)(),(0,i.iD)("span",b,(0,u.zw)(e.title),1)):((0,i.wg)(),(0,i.iD)("span",v,"Untitled"))],8,g),e.description?((0,i.wg)(),(0,i.iD)("section",f,(0,u.zw)(e.description),1)):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.isCubeMetadataOpen=!0),title:"Cube Metadata"},[(0,i.Wm)(Z,{class:"text-gray-500 w-5 h-5"})]),(0,i.Wm)(U,{title:"Cube Metadata",resource:e.cube.data.ptr,"is-open":e.isCubeMetadataOpen,onClose:t[1]||(t[1]=t=>e.isCubeMetadataOpen=!1)},null,8,["resource","is-open"])])]),(0,i._)("table",h,[(0,i._)("thead",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cube.data.dimensions,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.ptr.term.value,class:"border border-b-2 align-top text-left h-full"},[(0,i.Wm)(q,{cube:e.cube.data,dimension:t,language:e.displayLanguage,labels:e.labels[t.path.value],"sort-dimension":e.sortDimension,"sort-direction":e.sortDirection,filters:e.filters.get(t.path.value),onUpdateSort:e.updateSort,"onUpdate:filters":e.updateDimensionFilters},null,8,["cube","dimension","language","labels","sort-dimension","sort-direction","filters","onUpdateSort","onUpdate:filters"])])))),128))]),(0,i.wy)((0,i._)("tr",null,[(0,i._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-2"},[(0,i._)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filtersSummary,((t,a)=>((0,i.wg)(),(0,i.iD)("span",{key:a,class:"tag bg-gray-100 rounded-md flex items-center gap-1"},[(0,i._)("span",null,(0,u.zw)(t.label),1),(0,i._)("button",{title:"Remove filter",onClick:a=>e.removeFilter(t),class:"button-text"},[(0,i.Wm)(V,{class:"w-5 h-5"})],8,D)])))),128))])],8,w)],512),[[n.F8,e.filtersSummary.length>0]])]),e.observations.isLoading?((0,i.wg)(),(0,i.iD)("tbody",x,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Array(e.pageSize),(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-2"},[(0,i.Wm)(l)],8,k)])))),128))])):e.observations.error?((0,i.wg)(),(0,i.iD)("tbody",_,[(0,i._)("tr",null,[(0,i._)("td",{colspan:e.cube.data.dimensions.length,class:"border px-2 py-1"},(0,u.zw)(e.observations.error),9,S)])])):((0,i.wg)(),(0,i.iD)("tbody",C,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.observations.data,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cube.data.dimensions,(a=>((0,i.wg)(),(0,i.iD)("td",{key:a.ptr.term.value,class:(0,u.C_)(["border px-2 py-1 whitespace-nowrap",{"text-right tabular-nums":e.isNumericScale(a),"bg-primary-50":e.isMeasureDimension(a)}])},[(0,i.Wm)(O,{value:t[a.path.value],cube:e.cube.data,labels:e.labels[a.path.value],language:e.displayLanguage},null,8,["value","cube","labels","language"])],2)))),128))])))),128))]))]),(0,i.Wm)(P,{page:e.page,"onUpdate:page":t[2]||(t[2]=t=>e.page=t),pageSize:e.pageSize,"onUpdate:pageSize":t[3]||(t[3]=t=>e.pageSize=t),"items-count":e.observationCount},null,8,["page","pageSize","items-count"])]))])}var U=a(95881),q=a(20277),V=a(40977),O=a.n(V),P=a(96333),L=a(52083);const W={class:"mb-2 flex items-center justify-between"},K=["title"],I={key:0},j={key:1,class:"text-gray-500"},z={key:2,class:"pt-1"},T={class:"flex items-center gap-1"},M=["title"],H={key:1,class:"tag",title:"Linked to shared dimension"};function $(e,t,a,n,r,o){const s=(0,i.up)("chevron-down-icon"),l=(0,i.up)("chevron-up-icon"),c=(0,i.up)("filter-icon"),p=(0,i.up)("popover-button"),d=(0,i.up)("dimension-filters"),m=(0,i.up)("popover-panel"),g=(0,i.up)("popover"),b=(0,i.up)("scale-type-icon"),v=(0,i.up)("data-kind-icon"),f=(0,i.up)("annotation-icon"),h=(0,i.up)("link-icon"),w=(0,i.up)("dimension-metadata");return(0,i.wg)(),(0,i.iD)("div",{class:(0,u.C_)(["h-full px-2 py-1 flex flex-col justify-between",{"bg-primary-50":e.isMeasure}])},[(0,i._)("div",W,[(0,i._)("button",{class:(0,u.C_)(["flex items-start text-left leading-tight",{"font-semibold":e.isMeasure||e.isKey,underline:e.isSortDimension}]),title:e.property,onClick:t[0]||(t[0]=(...t)=>e.updateSort&&e.updateSort(...t))},[e.label?((0,i.wg)(),(0,i.iD)("span",I,(0,u.zw)(e.label),1)):((0,i.wg)(),(0,i.iD)("span",j,"Untitled")),e.isSortDimension?((0,i.wg)(),(0,i.iD)("span",z,[e.isSortAscending?((0,i.wg)(),(0,i.j4)(s,{key:0,class:"w-5 h-5"})):(0,i.kq)("",!0),e.isSortDescending?((0,i.wg)(),(0,i.j4)(l,{key:1,class:"w-5 h-5"})):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],10,K),(0,i.Wm)(g,{class:"relative"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{as:"button"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:(0,u.C_)(["w-5 h-5",{"text-primary-500":e.filters.length>0}])},null,8,["class"])])),_:1}),(0,i.Wm)(m,{class:"z-10 absolute bg-white border rounded shadow-md p-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{cube:e.cube,dimension:e.dimension,filters:e.filters,labels:e.labels,language:e.language,"onUpdate:filters":t[1]||(t[1]=t=>e.$emit("update:filters",e.dimension,t))},null,8,["cube","dimension","filters","labels","language"])])),_:1})])),_:1})]),(0,i._)("div",T,[(0,i.Wm)(b,{"scale-of-measure":e.scaleType},null,8,["scale-of-measure"]),(0,i.Wm)(v,{"data-kind":e.dataKind},null,8,["data-kind"]),e.description?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"tag",title:e.description},[(0,i.Wm)(f,{class:"w-5 h-5"})],8,M)):(0,i.kq)("",!0),e.isShared?((0,i.wg)(),(0,i.iD)("span",H,[(0,i.Wm)(h,{class:"w-5 h-5"})])):(0,i.kq)("",!0),(0,i.Wm)(w,{dimension:e.dimension},null,8,["dimension"])])],2)}var Y=a(68825),A=a(8725),F=a(42648),B=a(12153),E=a(86523),R=a(85954),N=a(37892);const G=["title"];function X(e,t,a,n,r,o){return e.dataKind.term?((0,i.wg)(),(0,i.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.icon),{class:"h-5 w-5"}))],8,G)):(0,i.kq)("",!0)}var J=a(31085),Q=a(36503),ee=a(43820),te=a(13922),ae=a(71756);const ne={[ae.XV.GeneralDateTimeDescription.value]:"Time description",[ae.fK.GeoCoordinates.value]:"Geographic coordinates",[ae.fK.GeoShape.value]:"Geographic shape"},ie={[ae.XV.GeneralDateTimeDescription.value]:J.Z,[ae.fK.GeoCoordinates.value]:Q.Z,[ae.fK.GeoShape.value]:ee.Z};var re=(0,i.aZ)({name:"ScaleOfMeasureIcon",props:{dataKind:{required:!0}},computed:{dataKindType(){return this.dataKind.out(ae.E_.type).term},label(){return ne[this.dataKindType.value]||this.dataKind.term.value},icon(){return ie[this.dataKindType.value]||te.Z}}}),oe=a(83744);const se=(0,oe.Z)(re,[["render",X]]);var le=se;const ue={class:"mb-4 flex flex-col gap-2"},ce=(0,i.Uk)(" Add filter "),pe=(0,i._)("button",{type:"submit",class:"button-primary self-end"}," Apply filters ",-1);function de(e,t,a,r,o,s){const l=(0,i.up)("dimension-filter"),u=(0,i.up)("plus-icon");return(0,i.wg)(),(0,i.iD)("form",{onSubmit:t[1]||(t[1]=(0,n.iM)(((...t)=>e.submit&&e.submit(...t)),["prevent"])),class:""},[(0,i._)("div",ue,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filtersData,((t,a)=>((0,i.wg)(),(0,i.j4)(l,{key:a,cube:e.cube,dimension:e.dimension,language:e.language,labels:e.labels,filter:t.value,"onUpdate:filter":e=>t.value=e},null,8,["cube","dimension","language","labels","filter","onUpdate:filter"])))),128)),(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.addFilter&&e.addFilter(...t)),class:"button-text justify-end"},[(0,i.Wm)(u,{class:"w-5 h-5"}),ce])]),pe],32)}var me=a(9544);const ge={class:"flex items-center gap-2"},be=["term"],ve={key:1,class:"text-gray-500"},fe={key:1,class:"text-gray-500"},he={key:1};function we(e,t,a,n,r,o){const s=(0,i.up)("SelectBox"),l=(0,i.up)("term-display"),c=(0,i.up)("term-input");return(0,i.wg)(),(0,i.iD)("fieldset",ge,[(0,i.Wm)(s,{modelValue:e.filter.operation,"onUpdate:modelValue":e.updateOperation,options:e.operations},{button:(0,i.w5)((({selected:e})=>[e?((0,i.wg)(),(0,i.iD)("span",{key:0,term:e.term},(0,u.zw)(e.label),9,be)):((0,i.wg)(),(0,i.iD)("span",ve,"Operation"))])),_:1},8,["modelValue","onUpdate:modelValue","options"]),e.dimension.in&&e.dimension.in.length>0?((0,i.wg)(),(0,i.j4)(s,{key:0,modelValue:e.filter.arg,"onUpdate:modelValue":e.updateArg,options:e.dimension.in},{button:(0,i.w5)((({selected:t})=>[t?((0,i.wg)(),(0,i.j4)(l,{key:0,term:e.resourceLabel(t),base:e.cube.term.value},null,8,["term","base"])):((0,i.wg)(),(0,i.iD)("span",fe,"Value"))])),option:(0,i.w5)((({option:t})=>[(0,i.Wm)(l,{term:e.resourceLabel(t),base:e.cube.term.value},null,8,["term","base"])])),_:1},8,["modelValue","onUpdate:modelValue","options"])):((0,i.wg)(),(0,i.iD)("div",he,[(0,i.Wm)(c,{placeholder:"Value",modelValue:e.filter.arg,"onUpdate:modelValue":e.updateArg,datatype:e.dimension.datatype},null,8,["modelValue","onUpdate:modelValue","datatype"])]))])}const ye={key:0},De={key:1,class:"text-gray-500"};function xe(e,t,a,n,r,o){const s=(0,i.up)("chevron-down-icon"),l=(0,i.up)("ListboxButton"),c=(0,i.up)("check-icon"),p=(0,i.up)("ListboxOption"),d=(0,i.up)("ListboxOptions"),m=(0,i.up)("Listbox");return(0,i.wg)(),(0,i.j4)(m,{modelValue:e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t)),as:"div",class:"relative"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"button hover:bg-white pr-2"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"button",{selected:e.modelValue},(()=>[e.modelValue?((0,i.wg)(),(0,i.iD)("span",ye,(0,u.zw)(e.modelValue?.label),1)):((0,i.wg)(),(0,i.iD)("span",De,"Select"))])),(0,i.Wm)(s,{class:"w-5 h-5 text-gray-500"})])),_:3}),(0,i.Wm)(d,{class:"absolute z-10 min-w-full border rounded-md shadow-md bg-white max-h-80 overflow-y-auto outline-none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.options,((t,a)=>((0,i.wg)(),(0,i.j4)(p,{key:a,value:t,as:"template"},{default:(0,i.w5)((({active:a,selected:n})=>[(0,i._)("button",{class:(0,u.C_)(["w-full p-2 flex items-center gap-1",{"bg-blue-50":a}])},[(0,i.Wm)(c,{class:(0,u.C_)(["w-5 h-5",{invisible:!n}])},null,8,["class"]),(0,i.WI)(e.$slots,"option",{option:t},(()=>[(0,i.Uk)((0,u.zw)(t.label),1)]))],2)])),_:2},1032,["value"])))),128))])),_:3})])),_:3},8,["modelValue"])}var ke=a(32704),_e=a(71315),Se=(0,i.aZ)({name:"SelectBox",components:{CheckIcon:_e.Z,ChevronDownIcon:E.Z,Listbox:ke.Ri,ListboxButton:ke.Y4,ListboxOptions:ke.O_,ListboxOption:ke.wt},props:{options:{type:Array,required:!0},modelValue:{}},emits:["update:modelValue"]});const Ce=(0,oe.Z)(Se,[["render",xe]]);var Ze=Ce,Ue=a(99397);const qe=["value"];function Ve(e,t,a,n,r,o){return(0,i.wg)(),(0,i.iD)("input",{type:"text",value:e.modelValue?.value,onChange:t[0]||(t[0]=(...t)=>e.update&&e.update(...t))},null,40,qe)}var Oe=(0,i.aZ)({name:"TermInput",props:{modelValue:{type:Y.Term,required:!1},datatype:{type:Y.Term,required:!1}},emits:["update:modelValue"],methods:{update(e){const t=e.target.value,a=t?L.ZP.literal(t,this.datatype):null;this.$emit("update:modelValue",a)}}});const Pe=(0,oe.Z)(Oe,[["render",Ve]]);var Le=Pe;const We=[{term:ae.ei.Eq,label:"="},{term:ae.ei.Ne,label:"!="},{term:ae.ei.In,label:"in"},{term:ae.ei.Lt,label:"<"},{term:ae.ei.Lte,label:"<="},{term:ae.ei.Gt,label:">"},{term:ae.ei.Gte,label:">="}];var Ke=(0,i.aZ)({name:"DimensionFilters",components:{SelectBox:Ze,TermDisplay:Ue.Z,TermInput:Le},props:{cube:{type:P.Cube,required:!0},dimension:{type:P.CubeDimension,required:!0},filter:{type:Object,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},emits:["update:filter"],computed:{operations(){return We}},methods:{updateOperation(e){this.$emit("update:filter",{...this.filter,operation:e})},updateArg(e){this.$emit("update:filter",{...this.filter,arg:e})},resourceLabel(e){return this.labels?.node(e).out(ae.fK.name,{language:this.language}).term||this.cube.ptr.node(e).out(ae.fK.name,{language:this.language}).term||e}}});const Ie=(0,oe.Z)(Ke,[["render",we]]);var je=Ie,ze=(0,i.aZ)({name:"DimensionFilters",components:{DimensionFilter:je,PlusIcon:me.Z},props:{cube:{type:P.Cube,required:!0},dimension:{type:P.CubeDimension,required:!0},filters:{type:Array,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},emits:["update:filters"],setup(e){const{filters:t}=(0,l.BK)(e),a=(0,l.iH)(t.value.map((e=>({value:e}))));return{filtersData:a}},methods:{submit(){const e=this.filtersData.map((({value:e})=>e)).filter((({operation:e,arg:t})=>e&&t));this.$emit("update:filters",e)},addFilter(){this.filtersData.push({value:{dimension:this.dimension,operation:null,arg:null}})}}});const Te=(0,oe.Z)(ze,[["render",de]]);var Me=Te;const He={class:"flex-grow flex items-center justify-end"};function $e(e,t,a,n,r,o){const s=(0,i.up)("information-circle-icon"),l=(0,i.up)("resource-details-dialog");return(0,i.wg)(),(0,i.iD)("div",He,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.isOpen=!0),title:"Dimension Metadata"},[(0,i.Wm)(s,{class:"text-gray-500 w-5 h-5"})]),(0,i.Wm)(l,{title:"Dimension Metadata",resource:this.dimension.ptr,"is-open":e.isOpen,onClose:t[1]||(t[1]=t=>e.isOpen=!1)},null,8,["resource","is-open"])])}const Ye={class:"flex items-center justify-center min-h-screen px-4"},Ae={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"},Fe={class:"pr-4 text-left font-semibold pb-2"},Be={class:"pb-2"};function Ee(e,t,a,n,r,o){const s=(0,i.up)("dialog-overlay"),l=(0,i.up)("x-circle-icon"),c=(0,i.up)("dialog-title"),p=(0,i.up)("term-display"),d=(0,i.up)("Dialog");return(0,i.wg)(),(0,i.j4)(d,{open:e.isOpen,onClose:t[1]||(t[1]=t=>e.$emit("close")),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,i.w5)((()=>[(0,i._)("div",Ye,[(0,i.Wm)(s,{class:"fixed inset-0 bg-black opacity-40"}),(0,i._)("div",Ae,[(0,i.Wm)(c,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,u.zw)(e.title)+" ",1),(0,i._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,i.Wm)(l,{class:"h-6 w-6"})])])),_:1}),(0,i._)("table",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.properties,(([e,t])=>((0,i.wg)(),(0,i.iD)("tr",{key:e.value,class:"align-top"},[(0,i._)("th",Fe,[(0,i.Wm)(p,{term:e},null,8,["term"])]),(0,i._)("td",Be,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{key:t},[e?((0,i.wg)(),(0,i.j4)(p,{key:0,term:e,"show-language":""},null,8,["term"])):(0,i.kq)("",!0)])))),128))])])))),128))])])])])),_:1},8,["open"])}var Re=a(85717),Ne=a(88888),Ge=(0,i.aZ)({name:"DimensionMetadata",components:{Dialog:Ne.Vq,DialogOverlay:Ne.t9,DialogTitle:Ne.$N,TermDisplay:Ue.Z,XCircleIcon:q.Z},props:{title:{type:String,required:!0},resource:{type:Re.Clownface,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close"],computed:{properties(){const e=this.resource,t=L.ZP.termSet([...e.dataset.match(e.term)].map((({predicate:e})=>e)));return[...t].map((t=>[t,e.out(t).terms]))}}});const Xe=(0,oe.Z)(Ge,[["render",Ee]]);var Je=Xe,Qe=(0,i.aZ)({name:"DimensionMetadata",components:{InformationCircleIcon:U.Z,ResourceDetailsDialog:Je},props:{dimension:{type:P.CubeDimension,required:!0}},data(){return{isOpen:!1}}});const et=(0,oe.Z)(Qe,[["render",$e]]);var tt=et;const at=["title"];function nt(e,t,a,n,r,o){return e.scaleOfMeasure.term?((0,i.wg)(),(0,i.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.icon),{class:"h-5 w-5"}))],8,at)):(0,i.kq)("",!0)}var it=a(26505),rt=a(56271),ot=a(62251),st=a(74563);const lt={[ae.wY.NominalScale.value]:st.Z,[ae.wY.OrdinalScale.value]:it.Z,[ae.wY.IntervalScale.value]:rt.Z,[ae.wY.RatioScale.value]:ot.Z};var ut=(0,i.aZ)({name:"ScaleOfMeasureIcon",props:{scaleOfMeasure:{required:!0}},computed:{label(){return this.scaleOfMeasure?.value.split("/").slice(-1)[0]??""},icon(){const e=this.scaleOfMeasure?.value??"";return lt[e]||te.Z}}});const ct=(0,oe.Z)(ut,[["render",nt]]);var pt=ct,dt=(0,i.aZ)({name:"DimensionHeader",components:{AnnotationIcon:F.Z,ChevronDownIcon:E.Z,ChevronUpIcon:R.Z,DataKindIcon:le,DimensionFilters:Me,DimensionMetadata:tt,FilterIcon:B.Z,LinkIcon:N.Z,Popover:A.J2,PopoverButton:A.O7,PopoverPanel:A.Hi,ScaleTypeIcon:pt},props:{cube:{type:P.Cube,required:!0},dimension:{type:P.CubeDimension,required:!0},language:{type:[Array,String],required:!0},labels:{type:Object,required:!1},sortDimension:{type:P.CubeDimension,default:null},sortDirection:{type:Y.Term,required:!0},filters:{type:Array,required:!0}},emits:["updateSort","update:filters"],computed:{label(){return this.dimension.out(ae.fK.name,{language:this.language}).value},description(){return this.dimension.out(ae.fK.comment,{language:this.language}).value},property(){return this.dimension.out(ae.sh.path).value},isMeasure(){return!!this.dimension.ptr.has(ae.E_.type,ae.kO.MeasureDimension).term},isKey(){return!!this.dimension.ptr.has(ae.E_.type,ae.kO.KeyDimension).term},isShared(){return!!this.dimension.ptr.has(ae.E_.type,ae.kO.SharedDimension).term},dataKind(){return this.dimension.out(ae.$y.dataKind)},scaleType(){return this.dimension.out(ae.wY.scaleType)},isSortDimension(){return this.sortDimension&&this.dimension.path.equals(this.sortDimension.path)},isSortAscending(){return ae.ei.Ascending.equals(this.sortDirection)},isSortDescending(){return ae.ei.Descending.equals(this.sortDirection)}},methods:{updateSort(){const e=this.isSortDimension?mt(this.sortDirection):ae.ei.Ascending;this.$emit("updateSort",this.dimension,e)}}});function mt(e){return ae.ei.Ascending.equals(e)?ae.ei.Descending:ae.ei.Ascending}const gt=(0,oe.Z)(dt,[["render",$]]);var bt=gt,vt=a(68736),ft=a(84269);const ht={class:"flex items-center gap-8"},wt={class:"flex items-center gap-1"},yt=["disabled"],Dt=["disabled"],xt=(0,i._)("span",null,"Page ",-1),kt=["value"],_t=(0,i._)("span",null," of ",-1),St=["title"],Ct={key:2},Zt=["disabled"],Ut=["value"];function qt(e,t,a,n,r,o){const s=(0,i.up)("chevron-double-left-icon"),l=(0,i.up)("chevron-left-icon"),c=(0,i.up)("loading-icon"),p=(0,i.up)("exclamation-circle-icon"),d=(0,i.up)("chevron-right-icon"),m=(0,i.up)("chevron-double-right-icon");return(0,i.wg)(),(0,i.iD)("div",ht,[(0,i._)("div",wt,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.updatePage(1)),title:"First page",class:"button px-2",disabled:1===e.page},[(0,i.Wm)(s,{class:"w-6 h-6"})],8,yt),(0,i._)("button",{onClick:t[1]||(t[1]=t=>e.updatePage(e.page-1)),title:"Previous page",class:"button px-2",disabled:1===e.page},[(0,i.Wm)(l,{class:"w-6 h-6"})],8,Dt),xt,(0,i._)("input",{type:"text",inputmode:"numeric",value:e.page,onChange:t[2]||(t[2]=t=>e.updatePage(t.target.value)),class:"w-14 text-right"},null,40,kt),_t,e.itemsCount.isLoading?((0,i.wg)(),(0,i.j4)(c,{key:0})):e.itemsCount.error?((0,i.wg)(),(0,i.iD)("span",{key:1,class:"text-red-500",title:e.itemsCount.error},[(0,i.Wm)(p,{class:"w-5 h-5"})],8,St)):((0,i.wg)(),(0,i.iD)("span",Ct,(0,u.zw)(e.pagesCount),1)),(0,i._)("button",{onClick:t[3]||(t[3]=t=>e.updatePage(e.page+1)),title:"Next page",class:"button px-2"},[(0,i.Wm)(d,{class:"w-6 h-6"})]),(0,i._)("button",{onClick:t[4]||(t[4]=t=>e.updatePage(e.pagesCount)),title:"Last page",class:"button px-2",disabled:!e.pagesCount||e.page===e.pagesCount},[(0,i.Wm)(m,{class:"w-6 h-6"})],8,Zt)]),(0,i._)("select",{value:e.pageSize,onChange:t[5]||(t[5]=t=>e.$emit("update:pageSize",Number(t.target.value))),title:"Items per page"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pageSizes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,u.zw)(e),1)))),128))],40,Ut)])}var Vt=a(35482),Ot=a(49746),Pt=a(93434),Lt=a(91461),Wt=a(6677);const Kt=["10","20","50","100"];var It=(0,i.aZ)({name:"PaginationMenu",components:{ChevronDoubleLeftIcon:Vt.Z,ChevronDoubleRightIcon:Ot.Z,ChevronLeftIcon:Pt.Z,ChevronRightIcon:Lt.Z,ExclamationCircleIcon:Wt.Z,LoadingIcon:vt.Z},props:{page:{type:Number,required:!0},pageSize:{type:Number,required:!0},itemsCount:{type:Object,required:!0}},emits:["update:page","update:pageSize"],setup(e){const{itemsCount:t,pageSize:a}=(0,l.BK)(e),n=(0,i.Fl)((()=>t.value.isLoading||t.value.error?null:Math.ceil(t.value.data/a.value)));return{pagesCount:n,pageSizes:Kt}},methods:{updatePage(e){const t=Number(e);isNaN(t)||this.$emit("update:page",t)}}});const jt=(0,oe.Z)(It,[["render",qt]]);var zt=jt,Tt=a(14734);const Mt="*",Ht=10;var $t=(0,i.aZ)({name:"CubeViewer",components:{DimensionHeader:bt,InformationCircleIcon:U.Z,LoadingIcon:vt.Z,ObservationValue:ft["default"],PaginationMenu:zt,ResourceDetailsDialog:Je,XCircleIcon:q.Z},props:{source:{type:P.Source,required:!0},cubeUri:{type:String,required:!0},language:{type:[String,Array],required:!1}},setup(e){const{source:t,cubeUri:a}=(0,l.BK)(e),n=(0,l.XI)(Tt.V_()),r=(0,l.XI)(null),o=(0,l.iH)(new Map),s=(0,l.iH)(1),u=(0,l.iH)(Ht),c=(0,l.XI)(null),p=(0,l.XI)(ae.ei.Ascending),d=(0,l.iH)(Tt.V_()),m=(0,l.iH)(Tt.V_()),g=O()(1),b=async()=>{"function"===typeof n.value?.data?.clear&&n.value.data.clear(),n.value=Tt.V_(),r.value=null,o.value=new Map,w.value={},d.value=Tt.V_(),m.value=Tt.V_();try{const e=await t.value.cube(a.value);e?(n.value=Tt.CL(e),r.value=P.CubeSource.fromSource(t.value,e),o.value=new Map(e.dimensions.map((e=>[e.path.value,[]])))):("function"===typeof n.value?.data?.clear&&n.value.data.clear(),n.value=Tt.vU(`Could not find cube ${a.value}`))}catch(e){console.error(e),"function"===typeof n.value?.data?.clear&&n.value.data.clear(),n.value=Tt.vU(e)}};(0,i.bv)(b),(0,i.YP)(a,b);const v=(0,l.XI)(null),f=()=>{n.value.data&&(v.value&&v.value.clear(),v.value=Yt(n.value.data,s.value,u.value,o.value,c.value,p.value))};(0,i.YP)([n,s,u,c,p,o],f);const h=async()=>{d.value=Tt.V_(),v.value&&(await g.add((async()=>{d.value=await Tt.he(v.value.observations.bind(v.value))})),await g.add((async()=>{m.value=await Tt.he(v.value.observationCount.bind(v.value))})))};(0,i.bv)(h),(0,i.YP)(v,h);const w=(0,l.iH)({}),y=async()=>{if(w.value={},!v.value||!r.value)return;const e=v.value.dimensions,t=await Promise.all(e.map((e=>g.add((async()=>At(e,r.value))))));w.value=t.reduce(((e,[t,a])=>({...e,[t.value]:a})),{})};(0,i.YP)(v,y);const D=(0,l.iH)(!1);return{cube:n,page:s,pageSize:u,sortDimension:c,sortDirection:p,filters:o,cubeSource:r,cubeView:v,observations:d,observationCount:m,isCubeMetadataOpen:D,labels:w,prepareCubeView:f}},computed:{displayLanguage(){return this.language??Mt},title(){const e=this.cube.data.out(ae.fK.name,{language:this.displayLanguage}).value;return e??null},description(){const e=this.cube.data.out(ae.fK.description,{language:this.displayLanguage}).value;return e??null},filtersSummary(){const e=this.displayLanguage,t=this.cube.data;return[...this.filters.entries()].flatMap((([a,n])=>n.map((({dimension:n,operation:i,arg:r},o)=>{const s=n.out(ae.fK.name,{language:e}).value,l=this.labels[n.path.value],u=l?.node(r).out(ae.fK.name,{language:e}).value||t.ptr.node(r).out(ae.fK.name,{language:e}).value||ae.Fi(r.value,this.cube.data.term.value);return{dimensionPath:a,index:o,label:`${s} ${i.label} ${u}`}}))))}},methods:{isNumericScale(e){const t=e.out(ae.wY.scaleType).term;return ae.wY.RatioScale.equals(t)||ae.wY.IntervalScale.equals(t)},isMeasureDimension(e){return!!e.ptr.has(ae.E_.type,ae.kO.MeasureDimension).term},updateSort(e,t){this.sortDimension=e,this.sortDirection=t},updateDimensionFilters(e,t){this.filters.set(e.path.value,t),this.prepareCubeView()},removeFilter({dimensionPath:e,index:t}){this.filters.get(e).splice(t,1),this.prepareCubeView()}}});function Yt(e,t,a,n,i,r){const o=P.View.fromCube(e);o.ptr.addOut(ae.ei.projection,(e=>{const n=(t-1)*a;if(e.addOut(ae.ei.limit,a),e.addOut(ae.ei.offset,n),i){const t=o.dimension({cubeDimension:i.path}),a=e.blankNode().addOut(ae.ei.dimension,t.ptr).addOut(ae.ei.direction,r);e.addList(ae.ei.orderBy,a)}}));const s=[...n.entries()].map((([e,t])=>t.map((({operation:t,arg:a})=>{const n=o.dimension({cubeDimension:e});return new P.Filter({dimension:n,operation:t.term,arg:a})}))));for(const l of s)o.addFilter(l);return o}const At=async(e,t)=>{const a=e.cubeDimensions[0],n=a.path,i=L.ZP.clownface({dataset:L.ZP.dataset()});if(ae.sh.IRI.equals(a.out(ae.sh.nodeKind).term)){const a=new P.View({parent:t}),r=P.LookupSource.fromSource(t);a.addDimension(e),a.addDimension(a.createDimension({source:r,path:ae.fK.name,join:e,as:ae.fK.name}));const o=await a.observations();for(const e of o){const t=e[n.value],a=e[ae.fK.name.value];i.node(t).addOut(ae.fK.name,a)}}return[n,i]},Ft=(0,oe.Z)($t,[["render",Z]]);var Bt=Ft;const Et={class:"p-3 bg-white shadow-lg flex justify-between items-center"},Rt={class:"form-field"},Nt=(0,i._)("span",{class:"label"},"SPARQL endpoint URL",-1),Gt={class:"form-field"},Xt=(0,i._)("span",{class:"label"},"Username",-1),Jt={class:"form-field"},Qt=(0,i._)("span",{class:"label"},"Password",-1),ea={class:"form-field"},ta=(0,i._)("span",{class:"label"},"Source graph",-1),aa={class:"flex justify-between"},na=["disabled"],ia={class:"flex items-end gap-2"},ra=(0,i.Uk)(" Endpoint config ");function oa(e,t,a,r,o,s){const l=(0,i.up)("x-circle-icon"),c=(0,i.up)("cube-selector"),p=(0,i.up)("cog-icon"),d=(0,i.up)("select-box"),m=(0,i.up)("share-url-button");return(0,i.wg)(),(0,i.iD)("div",Et,[e.open?((0,i.wg)(),(0,i.iD)("form",{key:0,onSubmit:t[5]||(t[5]=(0,n.iM)(((...t)=>e.updateSource&&e.updateSource(...t)),["prevent"])),class:"w-1/3 flex flex-col gap-2"},[(0,i._)("label",Rt,[Nt,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.options.endpointUrl=t)},null,512),[[n.nr,e.options.endpointUrl]])]),(0,i._)("label",Gt,[Xt,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.options.user=t)},null,512),[[n.nr,e.options.user]])]),(0,i._)("label",Jt,[Qt,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.options.password=t)},null,512),[[n.nr,e.options.password]])]),(0,i._)("label",ea,[ta,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.options.sourceGraph=t)},null,512),[[n.nr,e.options.sourceGraph]])]),(0,i._)("div",aa,[(0,i._)("button",{type:"submit",class:"button-primary",disabled:!e.isValid}," Fetch cubes ",8,na),(0,i._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[4]||(t[4]=t=>e.open=!1)},[(0,i.Wm)(l,{class:"h-6 w-6"})])])],32)):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",ia,[e.source?((0,i.wg)(),(0,i.j4)(c,{key:0,source:e.source,"cube-uri":e.cubeUri,onSelect:t[6]||(t[6]=t=>e.$emit("update:cubeUri",t))},null,8,["source","cube-uri"])):(0,i.kq)("",!0),(0,i._)("button",{class:"button",onClick:t[7]||(t[7]=t=>e.open=!0)},[(0,i.Wm)(p,{class:"h-4 w-4"}),ra]),(0,i.Wm)(d,{options:e.languages,"model-value":e.language[0],"onUpdate:modelValue":e.updateLanguage},{button:(0,i.w5)((({selected:e})=>[(0,i.Uk)((0,u.zw)(e),1)])),option:(0,i.w5)((({option:e})=>[(0,i.Uk)((0,u.zw)(e),1)])),_:1},8,["options","model-value","onUpdate:modelValue"])],512),[[n.F8,!e.open]]),e.source&&e.cubeUri?((0,i.wg)(),(0,i.j4)(m,{key:1,source:e.source,cubeUri:e.cubeUri},null,8,["source","cubeUri"])):(0,i.kq)("",!0)])}var sa=a(14618);const la={key:0,class:"p-2 flex items-center gap-2"},ua=(0,i.Uk)(" Loading cubes... "),ca={key:1,class:"p-2 text-red-500"},pa=["value"],da=(0,i._)("option",null,"Select cube",-1),ma=["value"];function ga(e,t,a,n,r,o){const s=(0,i.up)("loading-icon");return e.cubes.isLoading?((0,i.wg)(),(0,i.iD)("div",la,[(0,i.Wm)(s),ua])):e.cubes.error?((0,i.wg)(),(0,i.iD)("div",ca,(0,u.zw)(e.cubes.error),1)):((0,i.wg)(),(0,i.iD)("select",{key:2,value:e.cubeUri,onChange:t[0]||(t[0]=(...t)=>e.onSelect&&e.onSelect(...t))},[da,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cubes.data,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.term.value,value:e.term.value},(0,u.zw)(e.term.value),9,ma)))),128))],40,pa))}var ba=(0,i.aZ)({name:"CubeSelector",components:{LoadingIcon:vt.Z},props:{source:{type:P.Source,required:!0},cubeUri:String},emits:["select"],setup(e){const{source:t}=(0,l.BK)(e),a=(0,l.iH)(Tt.V_()),n=async()=>{a.value=Tt.V_(),a.value=await Tt.he((async()=>t.value.cubes({noShape:!0,filters:[P.Cube.filter.noValidThrough(),P.Cube.filter.noExpires()]})))};return(0,i.bv)(n),(0,i.YP)(t,n),{cubes:a}},methods:{onSelect(e){this.$emit("select",e.target.value)}}});const va=(0,oe.Z)(ba,[["render",ga]]);var fa=va;const ha=["value"],wa={class:"text-sm text-green-500"};function ya(e,t,a,r,o,s){const l=(0,i.up)("share-icon"),u=(0,i.up)("PopoverButton"),c=(0,i.up)("PopoverPanel"),p=(0,i.up)("Popover");return(0,i.wg)(),(0,i.j4)(p,{class:"relative"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"button",title:"Share"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"w-5 h-5"})])),_:1}),(0,i.Wm)(c,{class:"absolute right-0 z-10 border bg-white p-2"},{default:(0,i.w5)((()=>[(0,i._)("input",{type:"text",ref:"urlInput",value:e.shareUrl,readonly:"",onFocus:t[0]||(t[0]=(...t)=>e.copyShareUrl&&e.copyShareUrl(...t))},null,40,ha),(0,i.wy)((0,i._)("span",wa," Copied to clipboard ",512),[[n.F8,e.isCopied]])])),_:1})])),_:1})}var Da=a(97395),xa=(0,i.aZ)({name:"ShareUrlButton",components:{Popover:A.J2,PopoverButton:A.O7,PopoverPanel:A.Hi,ShareIcon:Da.Z},props:{source:{type:P.Source,required:!0},cubeUri:{type:String,required:!0}},setup(e){const{cubeUri:t,source:a}=(0,l.BK)(e),n=(0,l.iH)(""),r=()=>{const e=new URL(window.location.href);e.searchParams.set("cube",t.value??""),e.searchParams.set("endpointUrl",a.value.endpoint?.value??""),e.searchParams.set("user",a.value.user??""),e.searchParams.set("password",a.value.password??""),e.searchParams.set("sourceGraph",a.value.graph?.value??""),n.value=e.toString()};(0,i.bv)(r),(0,i.YP)(t,r);const o=(0,l.iH)(!1),s=async()=>{await navigator.clipboard.writeText(n.value),o.value=!0,setTimeout(u,2e3)},u=()=>{o.value=!1};return{shareUrl:n,isCopied:o,copyShareUrl:s,resetCopied:u}}});const ka=(0,oe.Z)(xa,[["render",ya]]);var _a=ka;const Sa=["de","fr","it","rm","en"];var Ca=(0,i.aZ)({name:"SourceConfig",components:{CogIcon:sa.Z,CubeSelector:fa,SelectBox:Ze,ShareUrlButton:_a,XCircleIcon:q.Z},props:{source:{type:P.Source,required:!1},cubeUri:{type:String,required:!1},language:{type:[Array,String],required:!1}},emits:["update:source","update:cubeUri","update:language"],setup(e){const{source:t}=(0,l.BK)(e),a=t.value?{endpointUrl:t.value.endpoint?.value,user:t.value.user,password:t.value.password,sourceGraph:t.value.graph?.value}:{endpointUrl:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_ENDPOINT_URL},n=(0,l.iH)(a),i=(0,l.iH)(!t.value);return{options:n,open:i,languages:Sa}},computed:{isValid(){return this.options.endpointUrl}},methods:{updateSource(){if(!this.isValid)return;const e=new P.Source(this.options);this.$emit("update:source",e),this.open=!1},updateLanguage(e){const t=[e,...Sa,"*"];this.$emit("update:language",t)}}});const Za=(0,oe.Z)(Ca,[["render",oa]]);var Ua=Za;const qa=["en","*"];var Va=(0,i.aZ)({name:"App",components:{CubeViewer:Bt,SourceConfig:Ua},setup(){const e=new URLSearchParams(window.location.search.substring(1)),t=(0,l.iH)(null),a=e.get("endpointUrl");a&&(t.value=new P.Source({endpointUrl:a,user:e.get("user")||void 0,password:e.get("password")||void 0,sourceGraph:e.get("sourceGraph")||void 0}));const n=(0,l.iH)(e.get("cube")),i=(0,l.iH)(qa);return{source:t,cubeUri:n,language:i}}});const Oa=(0,oe.Z)(Va,[["render",s]]);var Pa=Oa;const La=(0,n.ri)(Pa);La.mount("#app")},71756:function(e,t,a){"use strict";a.d(t,{$y:function(){return s},E_:function(){return u},Fi:function(){return g},XV:function(){return d},ei:function(){return m},fK:function(){return c},kO:function(){return o},sh:function(){return p},wY:function(){return l}});var n=a(2518),i=a(74919),r=(a(34667),a(52083));const o=r.ZP.namespace("https://cube.link/"),s=r.ZP.namespace("https://cube.link/meta/"),l=r.ZP.namespace(n.Z.qudt),u=r.ZP.namespace(n.Z.rdf),c=r.ZP.namespace(n.Z.schema),p=r.ZP.namespace(n.Z.sh),d=r.ZP.namespace(n.Z.time),m=r.ZP.namespace("https://cube.link/view/");function g(e,t){return t&&e.startsWith(t)?e.replace(t,"").replace(/^[/#]/,""):(0,i.F)(e)||e}},14734:function(e,t,a){"use strict";function n(){return{isLoading:!0,data:null,error:null}}function i(e){return{isLoading:!1,data:e,error:null}}function r(e){return{isLoading:!1,data:null,error:e}}async function o(e){try{const t=await e();return i(t)}catch(t){return r(t)}}a.d(t,{CL:function(){return i},V_:function(){return n},he:function(){return o},vU:function(){return r}})},84269:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var n=a(66252);const i={key:0},r={key:2,class:"flex-grow flex items-center justify-end"};function o(e,t,a,o,s,l){const u=(0,n.up)("term-display"),c=(0,n.up)("resource-explorer");return e.value?"Literal"===e.value.termType?((0,n.wg)(),(0,n.j4)(u,{key:1,term:e.value,base:e.cube.term.value},null,8,["term","base"])):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("button",{onClick:t[0]||(t[0]=t=>e.showResourceExplorer=!0),class:"tag bg-gray-200 whitespace-nowrap"},[(0,n.Wm)(u,{term:e.resourceLabel,base:e.cube.term.value},null,8,["term","base"])]),(0,n.Wm)(c,{uri:e.value,cube:e.cube,"is-open":e.showResourceExplorer,onClose:t[1]||(t[1]=t=>e.showResourceExplorer=!1)},null,8,["uri","cube","is-open"])])):((0,n.wg)(),(0,n.iD)("span",i,"-"))}var s=a(68825),l=a(96333);const u={class:"flex items-center justify-center min-h-screen px-4"},c={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"};function p(e,t,a,i,r,o){const s=(0,n.up)("dialog-overlay"),l=(0,n.up)("x-circle-icon"),p=(0,n.up)("dialog-title"),d=(0,n.up)("resource-details"),m=(0,n.up)("Dialog");return(0,n.wg)(),(0,n.j4)(m,{open:e.isOpen,onClose:t[1]||(t[1]=t=>e.$emit("close")),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.Wm)(s,{class:"fixed inset-0 bg-black opacity-40"}),(0,n._)("div",c,[(0,n.Wm)(p,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,n.w5)((()=>[(0,n._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,n.Wm)(l,{class:"h-6 w-6"})])])),_:1}),(0,n.Wm)(d,{uri:e.uri,cube:e.cube},null,8,["uri","cube"])])])])),_:1},8,["open"])}var d=a(88888),m=a(20277),g=a(3577);const b={class:"mb-4 whitespace-nowrap"},v=["href"],f={key:1,class:"text-red-500"},h=(0,n._)("h3",{class:"font-bold"},"Could not load resource",-1),w={key:2},y={class:"py-2 pr-4 font-semibold"},D={class:"py-2 flex flex-col gap-1"};function x(e,t,a,i,r,o){const s=(0,n.up)("external-link-icon"),l=(0,n.up)("loading-icon"),u=(0,n.up)("term-display"),c=(0,n.up)("observation-value");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",b,[(0,n._)("a",{href:e.uri.value,target:"_blank",rel:"noopener",class:"group flex items-center gap-1"},[(0,n.Uk)((0,g.zw)(e.uri.value)+" ",1),(0,n.Wm)(s,{class:"w-4 h-4 invisible group-hover:visible"})],8,v)]),e.resource.isLoading?((0,n.wg)(),(0,n.j4)(l,{key:0})):e.resource.error?((0,n.wg)(),(0,n.iD)("section",f,[h,(0,n.Uk)(" "+(0,g.zw)(e.resource.error),1)])):((0,n.wg)(),(0,n.iD)("table",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.properties,(([t,a],i)=>((0,n.wg)(),(0,n.iD)("tr",{key:i,class:"align-top"},[(0,n._)("td",y,[(0,n.Wm)(u,{term:t,base:e.cube.term.value},null,8,["term","base"])]),(0,n._)("td",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a,((t,a)=>((0,n.wg)(),(0,n.iD)("p",{key:a},[(0,n.Wm)(c,{value:t,cube:e.cube},null,8,["value","cube"])])))),128))])])))),128))]))])}a(21703);var k=a(2262),_=a(43498),S=a(40805),C=a.n(S),Z=a(52083),U=a(68736),q=a(99397),V=a(14734);Z.ZP.formats["import"](C());var O=(0,n.aZ)({name:"ResourceDetails",components:{ExternalLinkIcon:_.Z,LoadingIcon:U.Z,ObservationValue:(0,n.RC)((()=>Promise.resolve().then(a.bind(a,84269)))),TermDisplay:q.Z},props:{uri:{type:s.Term,required:!0},cube:{type:l.Cube,required:!0}},setup(e){const{uri:t}=(0,k.BK)(e),a=(0,k.iH)(V.V_()),i=async()=>{const e=t.value;try{const t=await Z.ZP.fetch(e.value);if(200!==t.status)throw new Error(`${t.status}`);{const n=await t.dataset();a.value=V.CL(Z.ZP.clownface({dataset:n,term:e}))}}catch(n){a.value=V.vU(n.message)}};return(0,n.bv)(i),(0,n.YP)(t,i),{resource:a}},computed:{properties(){const e=this.resource.data;if(!e)return[];const t=[...e.dataset.match(e.term,null,null)],a=Z.ZP.termSet(t.map((({predicate:e})=>e)));return[...a].map((t=>{const a=e.out(t).terms;return[t,a]}))}}}),P=a(83744);const L=(0,P.Z)(O,[["render",x]]);var W=L,K=(0,n.aZ)({name:"ResourceExplorer",components:{Dialog:d.Vq,DialogOverlay:d.t9,DialogTitle:d.$N,ResourceDetails:W,XCircleIcon:m.Z},props:{isOpen:{type:Boolean,required:!0},uri:{type:s.Term,required:!0},cube:{type:l.Cube,required:!0}},emits:["close"]});const I=(0,P.Z)(K,[["render",p]]);var j=I,z=a(71756),T=(0,n.aZ)({name:"ObservationValue",components:{ResourceExplorer:j,TermDisplay:q.Z},props:{value:{type:s.Term,required:!0},cube:{type:l.Cube,required:!0},labels:{type:Object,required:!1},language:{type:[String,Array],required:!1}},data(){return{showResourceExplorer:!1}},computed:{isLiteral(){return this.value&&"Literal"===this.value.termType},resourceLabel(){return this.labels?.node(this.value).out(z.fK.name,{language:this.language}).term||this.cube.ptr.node(this.value).out(z.fK.name,{language:this.language}).term||this.value}}});const M=(0,P.Z)(T,[["render",o]]);var H=M},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var n=a(66252),i=a(3577);const r=["title"],o={key:0,class:"text-gray-400"};function s(e,t,a,s,l,u){return(0,n.wg)(),(0,n.iD)("span",{title:e.expanded},[(0,n.Uk)((0,i.zw)(e.shrunk)+" ",1),e.showLanguage&&e.term.language?((0,n.wg)(),(0,n.iD)("span",o,"@"+(0,i.zw)(e.term.language),1)):(0,n.kq)("",!0)],8,r)}var l=a(68825),u=a(71756),c=(0,n.aZ)({name:"TermDisplay",props:{term:{type:l.Term,required:!0},showLanguage:{type:Boolean,default:!1},base:String},computed:{shrunk(){return"NamedNode"===this.term.termType?u.Fi(this.term.value,this.base):this.term.value},expanded(){if("Literal"===this.term.termType){const e=this.term.datatype?`^^${u.Fi(this.term.datatype.value)}`:"",t=this.term.language?`@${this.term.language}`:"";return`"${this.term.value}${t}"${e}`}return this.term.value}}}),p=a(83744);const d=(0,p.Z)(c,[["render",s]]);var m=d},68736:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(66252);const i={class:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r=(0,n._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o=(0,n._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),s=[r,o];function l(e,t){return(0,n.wg)(),(0,n.iD)("svg",i,s)}var u=a(83744);const c={},p=(0,u.Z)(c,[["render",l]]);var d=p},7716:function(){},53383:function(){},71156:function(){},45757:function(){},56965:function(){},70147:function(){},52361:function(){},94616:function(){}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],r=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],s=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)var c=l(a)}for(t&&t(n);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkcube_viewer"]=self["webpackChunkcube_viewer"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(15825)}));n=a.O(n)})();
//# sourceMappingURL=app.a99ba271.js.map