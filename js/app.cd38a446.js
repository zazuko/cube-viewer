(function(){var e={11809:function(e,t,n){"use strict";n.d(t,{C:function(){return l},o:function(){return r}});var i=n(27695);const a=i.ZP.namedNode("https://cube.link/view/as"),o=i.ZP.namedNode("https://cube.link/view/from");function r({view:e,cubeDimension:t}){const n=e.dimension({cubeDimension:t});if(!n){const n=t.ptr?t.ptr.term:t;for(const t of e.dimensions){const e=t.ptr.out(a).term;if(e&&e.equals(n))return t}for(const t of e.dimensions){const e=t.ptr.out(o).term;if(e&&e.equals(n))return t}console.log("No dimension found for",n.value)}return n}function l({dimension:e}){const t=e.cubeDimensions;if(t.length>0)return t;const n=e.ptr.out(o).terms;return n.map((t=>({term:t,ptr:e.ptr.node(t),path:e.ptr.out(a).term,dataset:e.dataset,graph:e.graph,in:[]})))}},15506:function(e,t,n){"use strict";n.d(t,{g:function(){return s},u:function(){return u}});var i=n(27695),a=n(71756),o=n(11809);function r(e){return!!e.ptr.has(a.ei.labelFor).term}function l({dimension:e,view:t}){const n=e.ptr.in(a.ei.labelFor).term;if(n){const e=t.dimensions.find((e=>e.ptr.term.equals(n)));return e?(0,o.C)({dimension:e})[0]:void 0}}function s({view:e}){if(e){const t=e.projectionDimensions;if(t)return t.filter((e=>!r(e))).map((t=>({viewDimension:t,cubeDimension:(0,o.C)({dimension:t})[0],labelCubePath:l({dimension:t,view:e})?.path,viewAs:t.ptr.out(a.ei.as).term})))}return[]}function u({cubePathStr:e,view:t}){const n=(0,o.o)({view:t,cubeDimension:i.ZP.namedNode(e)});return!(!n||!n.ptr.in(a.ei.labelFor).term)}},46024:function(e,t,n){"use strict";var i=n(49963),a=n(66252),o=n(3577),r=n(48743),l=n(57003),s=n(96333),u=n(27695),c=n(2262),p=n(20277),d=n(14618),m=n(69876),v=n(48872);const f={key:0,class:"p-2 flex items-center gap-2"},g={key:1,class:"p-2 text-red-500"},w=["value"],b=["value"];function y(e,t,n,i,r,l){const s=(0,a.up)("loading-icon");return e.cubes.isLoading?((0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(s),(0,a.Uk)(" Loading cubes... ")])):e.cubes.error?((0,a.wg)(),(0,a.iD)("div",g,(0,o.zw)(e.cubes.error),1)):((0,a.wg)(),(0,a.iD)("select",{key:2,value:e.cubeUri,onChange:t[0]||(t[0]=(...t)=>e.onSelect&&e.onSelect(...t))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cubes.data,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.term.value,value:e.term.value},(0,o.zw)(e.term.value),9,b)))),128))],40,w))}var h=n(68736),k=n(14734),D=(0,a.aZ)({name:"CubeSelector",components:{LoadingIcon:h.Z},props:{source:{type:s.Source,required:!0},cubeUri:String},emits:["select"],setup(e){const{source:t}=(0,c.BK)(e),n=(0,c.iH)(k.V_()),i=async()=>{n.value=k.V_(),n.value=await k.he((async()=>t.value.cubes({noShape:!0,filters:[s.Cube.filter.noValidThrough(),s.Cube.filter.noExpires()]})))};return(0,a.bv)(i),(0,a.YP)(t,i),{cubes:n}},methods:{onSelect(e){this.$emit("select",e.target.value)}}}),_=n(83744);const S=(0,_.Z)(D,[["render",y]]);var U=S;const x={key:0},C={key:1,class:"text-gray-500"};function Z(e,t,n,i,r,l){const s=(0,a.up)("chevron-down-icon"),u=(0,a.up)("ListboxButton"),c=(0,a.up)("check-icon"),p=(0,a.up)("ListboxOption"),d=(0,a.up)("ListboxOptions"),m=(0,a.up)("Listbox");return(0,a.wg)(),(0,a.j4)(m,{modelValue:e.modelValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:modelValue",t)),as:"div",class:"relative"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"button hover:bg-white pr-2"},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"button",{selected:e.modelValue},(()=>[e.modelValue?((0,a.wg)(),(0,a.iD)("span",x,(0,o.zw)(e.modelValue?.label),1)):((0,a.wg)(),(0,a.iD)("span",C,"Select"))])),(0,a.Wm)(s,{class:"w-5 h-5 text-gray-500"})])),_:3}),(0,a.Wm)(d,{class:"absolute z-10 min-w-full border rounded-md shadow-md bg-white max-h-80 overflow-y-auto outline-none"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,((n,i)=>((0,a.wg)(),(0,a.j4)(p,{onClick:t[0]||(t[0]=e=>e.preventDefault()),key:i,value:n,as:"template"},{default:(0,a.w5)((({active:t,selected:i})=>[(0,a._)("button",{class:(0,o.C_)(["w-full p-2 flex items-center gap-1",{"bg-blue-50":t}])},[(0,a.Wm)(c,{class:(0,o.C_)(["w-5 h-5",{invisible:!i}])},null,8,["class"]),(0,a.WI)(e.$slots,"option",{option:n},(()=>[(0,a.Uk)((0,o.zw)(n.label),1)]))],2)])),_:2},1032,["value"])))),128))])),_:3})])),_:3},8,["modelValue"])}var q=n(63196),V=n(71315),j=n(86523),P=(0,a.aZ)({name:"SelectBox",components:{CheckIcon:V.Z,ChevronDownIcon:j.Z,Listbox:q.Ri,ListboxButton:q.Y4,ListboxOptions:q.O_,ListboxOption:q.wt},props:{options:{type:Array,required:!0},modelValue:{}},emits:["update:modelValue"]});const O=(0,_.Z)(P,[["render",Z]]);var L=O;const W={key:0,class:"p-2 flex items-center gap-2"},H={key:1,class:"p-2 text-red-500"},z=["value"],I=["value"];function F(e,t,n,i,r,l){const s=(0,a.up)("loading-icon");return e.views.isLoading?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(s),(0,a.Uk)(" Loading views ... ")])):e.views.error?((0,a.wg)(),(0,a.iD)("div",H,(0,o.zw)(e.views.error),1)):((0,a.wg)(),(0,a.iD)("select",{key:2,value:e.viewUri,onChange:t[0]||(t[0]=(...t)=>e.onSelect&&e.onSelect(...t))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.views.data,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.term.value,value:e.term.value},(0,o.zw)(e.term.value),9,I)))),128))],40,z))}var T=(0,a.aZ)({name:"ViewSelector",components:{LoadingIcon:h.Z},props:{source:{type:s.Source,required:!0},viewUri:String},emits:["select"],setup(e){const{source:t}=(0,c.BK)(e),n=(0,c.iH)(k.V_()),i=async()=>{n.value=k.V_(),n.value=await k.he((async()=>t.value.views({noShape:!0})))};return(0,a.bv)(i),(0,a.YP)(t,i),{views:n}},methods:{onSelect(e){this.$emit("select",e.target.value)}}});const Y=(0,_.Z)(T,[["render",F]]);var $=Y;const K={class:"p-3 bg-white shadow-lg flex justify-between items-center"},E=["onSubmit"],N={class:"form-field"},A=(0,a._)("span",{class:"label"},"SPARQL endpoint URL",-1),M={class:"form-field"},R=(0,a._)("span",{class:"label"},"Username",-1),B={class:"form-field"},G=(0,a._)("span",{class:"label"},"Password",-1),X={class:"form-field"},J=(0,a._)("span",{class:"label"},"Source graph",-1),Q={class:"flex justify-between"},ee=["disabled"],te={class:"flex items-end gap-2"};var ne={__name:"SourceConfig",props:{source:{type:s.Source,required:!1},viewInput:{type:Object,required:!1}},emits:["update:source","setViewInput"],setup(e,{emit:t}){const n=e,l=["cubes","views"],u=["de","fr","it","rm","en"],f=(0,r.ltg)("hash-params"),g=(0,c.iH)(),w=(0,c.iH)(),b=(0,c.iH)("cubes");(0,a.bv)((()=>{g.value=!n.source?.endpoint,w.value={endpointUrl:f.endpointUrl?f.endpointUrl:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_ENDPOINT_URL,user:f.user,password:f.password,sourceGraph:f.sourceGraph}}));const y=(0,a.Fl)((()=>{if(n.viewInput){const{cubeUri:e,viewUri:t,dataset:i}=n.viewInput;return e?"cubes":t?"views":i?"link":b.value}})),h=(0,v.ZP)(),{language:k,pointer:D}=(0,m.Jk)(h);function _(e){k.value=[e,...u,"*"]}function S(){return w.value?.endpointUrl}function x(){if(S()){const e=new s.Source(w.value);t("update:source",e),g.value=!1}}function C(e){b.value=e,t("setViewInput",{})}function Z(e){t("setViewInput",{cubeUri:e})}function q(e){t("setViewInput",{viewUri:e})}function V(e){t("setViewInput",{})}return(t,n)=>((0,a.wg)(),(0,a.iD)("div",K,[g.value?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:(0,i.iM)(x,["prevent"]),class:"w-1/3 flex flex-col gap-2"},[(0,a._)("label",N,[A,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>w.value.endpointUrl=e)},null,512),[[i.nr,w.value.endpointUrl]])]),(0,a._)("label",M,[R,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>w.value.user=e)},null,512),[[i.nr,w.value.user]])]),(0,a._)("label",B,[G,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=e=>w.value.password=e)},null,512),[[i.nr,w.value.password]])]),(0,a._)("label",X,[J,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=e=>w.value.sourceGraph=e)},null,512),[[i.nr,w.value.sourceGraph]])]),(0,a._)("div",Q,[(0,a._)("button",{type:"submit",class:"button-primary",disabled:!S}," Fetch cubes ",8,ee),(0,a._)("button",{type:"button",class:"button-text",title:"Close",onClick:n[4]||(n[4]=e=>g.value=!1)},[(0,a.Wm)((0,c.SU)(p.Z),{class:"h-6 w-6"})])])],40,E)):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",te,["views"===(0,c.SU)(y)||"cubes"===(0,c.SU)(y)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(L,{options:l,"model-value":(0,c.SU)(y),"onUpdate:modelValue":C},{button:(0,a.w5)((({selected:e})=>[(0,a.Uk)((0,o.zw)(e),1)])),option:(0,a.w5)((({option:e})=>[(0,a.Uk)((0,o.zw)(e),1)])),_:1},8,["model-value"]),e.source&&"cubes"===(0,c.SU)(y)?((0,a.wg)(),(0,a.j4)(U,{key:0,source:e.source,"cube-uri":e.viewInput.cubeUri,onSelect:Z},null,8,["source","cube-uri"])):(0,a.kq)("",!0),e.source&&"views"===(0,c.SU)(y)?((0,a.wg)(),(0,a.j4)($,{key:1,source:e.source,"view-uri":e.viewInput.viewUri,onSelect:q},null,8,["source","view-uri"])):(0,a.kq)("",!0)],64)):(0,a.kq)("",!0),(0,a._)("button",{class:"button",onClick:n[5]||(n[5]=e=>g.value=!0)},[(0,a.Wm)((0,c.SU)(d.Z),{class:"h-4 w-4"}),(0,a.Uk)(" Endpoint config ")]),(0,a.Wm)(L,{options:u,"model-value":(0,c.SU)(k)[0],"onUpdate:modelValue":_},{button:(0,a.w5)((({selected:e})=>[(0,a.Uk)((0,o.zw)(e),1)])),option:(0,a.w5)((({option:e})=>[(0,a.Uk)((0,o.zw)(e),1)])),_:1},8,["model-value"]),"link"===(0,c.SU)(y)?((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",class:"button-text",title:"Close",onClick:V},[(0,a.Uk)(" Clear "),(0,a.Wm)((0,c.SU)(p.Z),{class:"h-6 w-6"})])):(0,a.kq)("",!0)],512),[[i.F8,!g.value]])]))}};const ie=ne;var ae=ie,oe=n(71756);function re(e){const{term:t,dataset:n}=le({term:e.term,dataset:e.dataset});return u.ZP.clownface({term:t,dataset:n})}function le({term:e,dataset:t}){const n=u.ZP.traverser((({dataset:e,level:t,quad:n})=>0===t||"BlankNode"===n.subject.termType&&t<20||n.predicate.value.startsWith(oe.ei.value)&&t<20)),i=u.ZP.dataset();return i.addAll(n.match({term:e,dataset:t})),{term:e,dataset:i}}var se=n(70088),ue=n(11809);const ce=10;function pe(e){const t=e.offset()??0,n=e.limit()??ce,i=Math.floor(t/n)+1,{sortDimension:a,sortDirection:o}=me(e);return{page:i,pageSize:n,sortDimension:a,sortDirection:o}}function de({view:e,projection:t}){const{page:n,pageSize:i,sortDimension:a,sortDirection:o}=t;if(!e)return e;const r=i,l=(n-1)*i;function s(t,n){if(!t)return null;const i=(0,ue.o)({view:e,cubeDimension:t});return[{dimension:i.ptr.term,direction:n}]}const u=s(a,o);return e.updateProjection({offset:l,limit:r,orderBy:u}),e}function me(e){const t=e.orderBy();if(!t)return{sortDimension:null,sortDirection:oe.ei.Ascending};if(1===t.length){const{sortDimension:e,sortDirection:n}=t[0];return{sortDimension:e,sortDirection:n}}if(t.length>1)throw Error("Only one criterion supported")}async function ve({source:e,cubeUri:t}){const n=await e.cube(t);n.source=s.CubeSource.fromSource(n.source,n);const i=s.View.fromCube(n);return we({view:i}),be({view:i})}async function fe({source:e,viewUri:t}){const n=await e.view(t);return await n.fetchCubesShapes(),we({view:n}),be({view:n})}async function ge({dataset:e,fallbackSource:t}){const n=[...e.match(null,oe.E_.type,oe.ei.View)];if(n.length<1)return;const{view:i}=se.ViewBuilder.fromDataset({term:n[0].subject,dataset:e});return i.sources().length<1&&(i.source=t),await i.fetchCubesShapes(),we({view:i}),be({view:i})}function we({view:e}){if(!e.projectionDimensions)throw Error("requires a projection with dimensions defined");for(const t of e.dimensions){const e=(0,ue.C)({dimension:t});if(!e.length)throw Error(`no cube-dimensions found for view-dimension ${t.ptr.value}, through cube:observationConstraint`);for(const t of e)if(!t.path)throw Error(`no path found for ${t.ptr.value}`)}}function be({view:e}){const t=e.offset()??0,n=e.limit()??ce;return e.offset(t),e.limit(n),e}var ye=n(95881);const he={class:"flex items-center justify-center min-h-screen px-4"},ke={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"},De={class:"pr-4 text-left font-semibold pb-2"},_e={class:"pb-2"};function Se(e,t,n,i,r,l){const s=(0,a.up)("dialog-overlay"),u=(0,a.up)("x-circle-icon"),c=(0,a.up)("dialog-title"),p=(0,a.up)("term-display"),d=(0,a.up)("Dialog");return(0,a.wg)(),(0,a.j4)(d,{open:e.isOpen,onClose:t[1]||(t[1]=t=>e.$emit("close")),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,a.w5)((()=>[(0,a._)("div",he,[(0,a.Wm)(s,{class:"fixed inset-0 bg-black opacity-40"}),(0,a._)("div",ke,[(0,a.Wm)(c,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.title)+" ",1),(0,a._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,a.Wm)(u,{class:"h-6 w-6"})])])),_:1}),(0,a._)("table",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.properties,(([e,t])=>((0,a.wg)(),(0,a.iD)("tr",{key:e.value,class:"align-top"},[(0,a._)("th",De,[(0,a.Wm)(p,{term:e},null,8,["term"])]),(0,a._)("td",_e,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((e,t)=>((0,a.wg)(),(0,a.iD)("p",{key:t},[e?((0,a.wg)(),(0,a.j4)(p,{key:0,term:e,"show-language":""},null,8,["term"])):(0,a.kq)("",!0)])))),128))])])))),128))])])])])),_:1},8,["open"])}var Ue=n(85717),xe=n(18047),Ce=n(69933),Ze=(0,a.aZ)({name:"DimensionMetadata",components:{Dialog:xe.Vq,DialogOverlay:xe.t9,DialogTitle:xe.$N,TermDisplay:Ce.Z,XCircleIcon:p.Z},props:{title:{type:String,required:!0},pointer:{type:Ue.Clownface,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close"],computed:{properties(){const e=this.pointer,t=u.ZP.termSet([...e.dataset.match(e.term)].map((({predicate:e})=>e)));return[...t].map((t=>[t,e.out(t).terms]))}}});const qe=(0,_.Z)(Ze,[["render",Se]]);var Ve=qe;const je={class:"flex flex-row"},Pe=["title"],Oe={key:0},Le={key:1,class:"text-gray-500"},We={key:0,class:"text-sm text-gray-700"};var He={__name:"MetadataHeader",props:{pointer:{type:Object,required:!0}},setup(e){const t=e,n=(0,v.ZP)(),i=(0,c.iH)(!1),r=(0,a.Fl)((()=>{if(!t.pointer)return null;const e=t.pointer.out(oe.fK.description,{language:n.language}).value;return e??null})),l=(0,a.Fl)((()=>{if(!t.pointer)return null;const e=t.pointer.out(oe.fK.name,{language:n.language}).value;return e??null}));return(t,n)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",je,[(0,a._)("h1",{class:"font-bold mb-2 grow",title:e.pointer.term.value},[(0,c.SU)(l)?((0,a.wg)(),(0,a.iD)("span",Oe,(0,o.zw)((0,c.SU)(l)),1)):((0,a.wg)(),(0,a.iD)("span",Le,"Untitled"))],8,Pe)]),(0,c.SU)(r)?((0,a.wg)(),(0,a.iD)("section",We,(0,o.zw)((0,c.SU)(r)),1)):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("button",{onClick:n[0]||(n[0]=e=>i.value=!0),title:"Metadata"},[(0,a.Wm)((0,c.SU)(ye.Z),{class:"text-gray-500 w-5 h-5"})]),(0,a.Wm)(Ve,{title:"Metadata",pointer:e.pointer,"is-open":i.value,onClose:n[1]||(n[1]=e=>i.value=!1)},null,8,["pointer","is-open"])])],64))}};const ze=He;var Ie=ze,Fe=n(8725),Te=n(97395);const Ye={key:0},$e={key:1},Ke=(0,a._)("span",{class:"text-sm text-green-500"}," Copied to clipboard ",-1);var Ee={__name:"ShareUrlButton",emits:["prepareParams"],setup(e,{expose:t,emit:n}){const i=(0,c.iH)(),{text:o,copy:l,copied:s,isSupported:u}=(0,r.VPI)({source:i});async function p(e){const t=new URLSearchParams({url:e}),n=await fetch("https://s.zazuko.com/api/v1/shorten/",{method:"POST",body:t}),a=await n;a.status<200||a.status>=300?(console.error("shortener error",a.status),i.value=e):i.value=await n.text(),await l(i.value)}function d(){n("prepareParams")}return(0,a.bv)((()=>{i.value=new URL(window.location.href)})),t({copyURL:p}),(e,t)=>((0,a.wg)(),(0,a.j4)((0,c.SU)(Fe.J2),{class:"relative"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,c.SU)(Fe.O7),{class:"button",title:"Share",onClick:d},{default:(0,a.w5)((()=>[(0,a.Wm)((0,c.SU)(Te.Z),{class:"w-5 h-5"})])),_:1}),(0,c.SU)(s)?((0,a.wg)(),(0,a.iD)("span",$e,"Copied!")):((0,a.wg)(),(0,a.iD)("span",Ye,"Copy")),(0,c.SU)(s)?((0,a.wg)(),(0,a.j4)((0,c.SU)(Fe.Hi),{key:2,class:"absolute right-0 z-10 border bg-white p-2"},{default:(0,a.w5)((()=>[Ke])),_:1})):(0,a.kq)("",!0)])),_:1}))}};const Ne=Ee;var Ae=Ne,Me=n(40977),Re=n.n(Me);const Be=(0,m.Q_)("viewStore",(()=>{const e=(0,c.XI)();function t(t){return e.value.filters.filter((e=>e.dimension.equals(t.ptr.term)))}function n({filter:t}){e.value.clearFilter(t)}function i(n,i){for(const a of t(n))a.argList||e.value.clearFilter(a);for(const t of i){const i=new s.Filter({dimension:n,operation:t.operation,arg:t.args,parent:e.value});e.value.addFilter(i)}}return{currentView:e,filtersOfDimension:t,updateDimensionFilters:i,removeFilter:n}}));var Ge=Be,Xe=n(15506);n(68855);const Je={class:"edit-box-container"},Qe={key:0},et=["customPrefixes","format","quads"];var tt={__name:"Editbox",props:{format:{required:!0,default:"text/turtle",type:String},quads:Array},emits:["updateView"],setup(e,{emit:t}){const n=(0,c.iH)();function i(e){n.value=e?.detail?.error}const r=(0,c.iH)();function l({detail:e}){console.log("parsed",e.value.length,"quads"),n.value="",t("updateView",e.value)}const s=(0,c.iH)({view:"https://cube.link/view/",purl:"http://purl.org/dc/terms/",schema:"http://schema.org/",cube:"https://cube.link/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",shacl:"http://www.w3.org/ns/shacl#"});return(t,u)=>((0,a.wg)(),(0,a.iD)("div",Je,[n.value?((0,a.wg)(),(0,a.iD)("div",Qe,(0,o.zw)(n.value),1)):(0,a.kq)("",!0),(0,a._)("rdf-editor",{ref_key:"editor",ref:r,customPrefixes:s.value,format:e.format,quads:e.quads,"auto-parse":"",parseDelay:"1000",onQuadsChanged:l,onParsingFailed:i},null,40,et)]))}};const nt=(0,_.Z)(tt,[["__scopeId","data-v-1b573aca"]]);var it=nt;const at=e=>((0,a.dD)("data-v-7d91aa26"),e=e(),(0,a.Cn)(),e),ot={class:"container"},rt={class:"menu"},lt={class:"main"},st={class:"controls"},ut={key:0,class:"gloss"},ct={key:0,class:"gloss"},pt={key:2,class:"gloss"},dt=at((()=>(0,a._)("div",{class:"gloss"}," Current view ",-1))),mt=at((()=>(0,a._)("tr",null,[(0,a._)("th",null,"View dimension"),(0,a._)("th",null,"Cube dimensions"),(0,a._)("th",null,"Cubes")],-1))),vt=at((()=>(0,a._)("div",{class:"gloss"}," Sources ",-1))),ft={key:0,class:"gloss"},gt={class:"content"};var wt={__name:"DebugBox",props:{initialState:{default:1,type:Number},debugView:{type:s.View,required:!0}},emits:["updateDataset"],setup(e,{emit:t}){const n=e,i=1,r=2,l=3,s=4,p=(0,c.iH)([]);async function d(e){p.value=e}async function m(){const e=u.ZP.dataset();e.addAll(p.value),t("updateDataset",{dataset:e})}async function v(){const e=re(n.debugView).dataset;t("updateDataset",{dataset:e})}const f=(0,c.iH)();(0,a.bv)((()=>{f.value=n.initialState}));const g=(0,a.Fl)((()=>[...re(n.debugView).dataset])),w=(0,a.Fl)((()=>[...n.debugView.ptr.dataset])),b=(0,a.Fl)((()=>{const e=[];for(const t of n.debugView.dimensions)e.push({viewDimensionTerm:t.ptr.term.value,cubeDimensionsTerms:(0,ue.C)({dimension:t}).map((e=>e.path.value)),cubesTerms:t.cubes.map((e=>e.value))});return e})),y=(0,a.Fl)((()=>({endpoints:n.debugView.sources().map((e=>e.endpoint))})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",ot,[(0,a._)("div",rt,[(0,a._)("button",{class:(0,o.C_)(f.value===i?"menu-item-selected":"menu-item"),onClick:t[0]||(t[0]=e=>f.value=i)}," Current view ",2),(0,a._)("button",{class:(0,o.C_)(f.value===r?"menu-item-selected":"menu-item"),onClick:t[1]||(t[1]=e=>f.value=r)}," All ",2),(0,a._)("button",{class:(0,o.C_)(f.value===l?"menu-item-selected":"menu-item"),onClick:t[2]||(t[2]=e=>f.value=l)}," Import ",2),(0,a._)("button",{class:(0,o.C_)(f.value===s?"menu-item-selected":"menu-item"),onClick:t[3]||(t[3]=e=>f.value=s)}," Info ",2)]),(0,a._)("div",lt,[(0,a._)("div",st,[f.value===i?((0,a.wg)(),(0,a.iD)("div",ut,(0,o.zw)((0,c.SU)(g).length)+" quads for this view ",1)):(0,a.kq)("",!0),f.value===l?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[p.value.length?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:m,class:"bg-transparent hover:bg-gray-500 text-gray-700 font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent rounded"}," Import "+(0,o.zw)(p.value.length)+" Quads ",1)):((0,a.wg)(),(0,a.iD)("div",ct," Paste some turtle to import it "))],64)):(0,a.kq)("",!0),f.value===r?((0,a.wg)(),(0,a.iD)("div",pt,(0,o.zw)((0,c.SU)(w).length)+" quads in memory ",1)):(0,a.kq)("",!0),f.value===s?((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[dt,(0,a._)("div",null,[(0,a._)("table",null,[mt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,c.SU)(b),(({viewDimensionTerm:e,cubeDimensionsTerms:t,cubesTerms:n})=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,(0,o.zw)(e),1),(0,a._)("td",null,(0,o.zw)(t),1),(0,a._)("td",null,(0,o.zw)(n),1)])))),256))])]),vt,(0,a._)("div",null,(0,o.zw)((0,c.SU)(y)),1),p.value.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ft," Export and import the current view ")),(0,a._)("button",{onClick:v,class:"bg-transparent hover:bg-gray-500 text-gray-700 font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent rounded"}," round trip ")],64)):(0,a.kq)("",!0)]),(0,a._)("div",gt,[f.value===i?((0,a.wg)(),(0,a.j4)(it,{key:0,format:"text/turtle",quads:(0,c.SU)(g)},null,8,["quads"])):(0,a.kq)("",!0),f.value===l?((0,a.wg)(),(0,a.j4)(it,{key:1,title:"Import",format:"text/turtle",onUpdateView:d})):(0,a.kq)("",!0),f.value===r?((0,a.wg)(),(0,a.j4)(it,{key:2,format:"text/turtle",quads:(0,c.SU)(w)},null,8,["quads"])):(0,a.kq)("",!0)])])]))}};const bt=(0,_.Z)(wt,[["__scopeId","data-v-7d91aa26"]]);var yt=bt,ht=n(12153),kt=n(42648),Dt=n(85954),_t=n(37892),St=n(68825);const Ut=["title"];function xt(e,t,n,i,o,r){return e.dataKind.term?((0,a.wg)(),(0,a.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon),{class:"h-5 w-5"}))],8,Ut)):(0,a.kq)("",!0)}var Ct=n(31085),Zt=n(36503),qt=n(43820),Vt=n(13922);const jt={[oe.XV.GeneralDateTimeDescription.value]:"Time description",[oe.fK.GeoCoordinates.value]:"Geographic coordinates",[oe.fK.GeoShape.value]:"Geographic shape"},Pt={[oe.XV.GeneralDateTimeDescription.value]:Ct.Z,[oe.fK.GeoCoordinates.value]:Zt.Z,[oe.fK.GeoShape.value]:qt.Z};var Ot=(0,a.aZ)({name:"ScaleOfMeasureIcon",props:{dataKind:{required:!0}},computed:{dataKindType(){return this.dataKind.out(oe.E_.type).term},label(){return jt[this.dataKindType.value]||this.dataKind.term.value},icon(){return Pt[this.dataKindType.value]||Vt.Z}}});const Lt=(0,_.Z)(Ot,[["render",xt]]);var Wt=Lt,Ht=n(9544),zt=n(10368);const It=["value"];var Ft={__name:"TermInput",props:{modelValue:{type:St.Term,required:!1},datatype:{type:St.Term,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e;function i(e){const i=e.target.value,a=i?u.ZP.literal(i,n.datatype):null;t("update:modelValue",a)}return(t,n)=>((0,a.wg)(),(0,a.iD)("input",{type:"text",value:e.modelValue?.value,onChange:i},null,40,It))}};const Tt=Ft;var Yt=Tt;const $t={key:0},Kt={key:1,class:"text-gray-500"};var Et={__name:"SelectBoxMultiple",props:{options:{type:Array,required:!0},modelValue:{type:Array,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){return(t,n)=>((0,a.wg)(),(0,a.j4)((0,c.SU)(q.Ri),{multiple:"",modelValue:e.modelValue,"onUpdate:modelValue":n[1]||(n[1]=e=>t.$emit("update:modelValue",e)),as:"div",class:"relative"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,c.SU)(q.Y4),{class:"button hover:bg-white pr-2"},{default:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"button",{selected:e.modelValue},(()=>[e.modelValue?((0,a.wg)(),(0,a.iD)("span",$t,(0,o.zw)(e.modelValue.map((e=>e.label??"no-label")).join(", ")),1)):((0,a.wg)(),(0,a.iD)("span",Kt,"Select"))])),(0,a.Wm)((0,c.SU)(j.Z),{class:"w-5 h-5 text-gray-500"})])),_:3}),(0,a.Wm)((0,c.SU)(q.O_),{class:"absolute z-10 min-w-full border rounded-md shadow-md bg-white max-h-80 overflow-y-auto outline-none"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,((e,i)=>((0,a.wg)(),(0,a.j4)((0,c.SU)(q.wt),{onClick:n[0]||(n[0]=e=>e.preventDefault()),key:i,value:e,as:"template"},{default:(0,a.w5)((({active:n,selected:i})=>[(0,a._)("button",{class:(0,o.C_)(["w-full p-2 flex items-center gap-1",{"bg-blue-50":n}])},[(0,a.Wm)((0,c.SU)(V.Z),{class:(0,o.C_)(["w-5 h-5",{invisible:!i}])},null,8,["class"]),(0,a.WI)(t.$slots,"option",{option:e},(()=>[(0,a.Uk)((0,o.zw)(e.label??"no-label"),1)]))],2)])),_:2},1032,["value"])))),128))])),_:3})])),_:3},8,["modelValue"]))}};const Nt=Et;var At=Nt;const Mt={class:"flex items-center gap-2"},Rt=["term"],Bt={key:1,class:"text-gray-500"},Gt={key:0,class:"text-gray-500"},Xt={key:2,class:"text-gray-500"},Jt={key:1,class:"text-gray-500"},Qt={key:1,class:"text-gray-500"};var en={__name:"DimensionFilter",props:{dimension:{type:Object,required:!0},viewDimension:{type:Object,required:!0},filterWrapper:{type:Object,required:!0}},emits:["updateFilter"],setup(e,{emit:t}){const n=e,i=(0,v.ZP)(),{getDisplayTerm:r}=i,l=(0,c.iH)([]),s=(0,c.iH)(),u=(0,c.iH)([]),p=(0,c.iH)();function d(e){s.value=e,u.value=[]}function m({term:e}){u.value=[e],b.value=e,g()}function f({terms:e}){u.value=e,g()}function g(){u.value.length&&s.value&&t("updateFilter",{dimension:n.viewDimension,operation:s.value.term,args:u.value})}(0,a.bv)((()=>{l.value=zt.J.filter((e=>!e.onlyLiterals||!w.value));const{filter:e,readOnly:t}=n.filterWrapper;t?p.value=t:e&&(s.value=zt.J.find((t=>t.term.equals(e.operation))),u.value=e.args)}));const w=(0,a.Fl)((()=>n.dimension.in&&n.dimension.in.length>0)),b=(0,c.iH)();return(t,n)=>((0,a.wg)(),(0,a.iD)("fieldset",Mt,[e.filterWrapper.readOnly?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,o.zw)(p.value),1)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(L,{modelValue:s.value,"onUpdate:modelValue":d,options:l.value},{button:(0,a.w5)((({selected:e})=>[e?((0,a.wg)(),(0,a.iD)("span",{key:0,term:e.term},(0,o.zw)(e.label),9,Rt)):((0,a.wg)(),(0,a.iD)("span",Bt,"Operation"))])),_:1},8,["modelValue","options"]),s.value?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,c.SU)(w)&&s.value.multipleValues?((0,a.wg)(),(0,a.j4)(At,{key:0,modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=e=>f({terms:e})),options:e.dimension.in},{button:(0,a.w5)((({selected:e})=>[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[0===e.length?((0,a.wg)(),(0,a.iD)("span",Gt,"select")):1===e.length?((0,a.wg)(),(0,a.j4)(Ce.Z,{key:1,term:(0,c.SU)(r)(e[0])},null,8,["term"])):((0,a.wg)(),(0,a.iD)("span",Xt,"("+(0,o.zw)(e.length)+") items",1))],64)):((0,a.wg)(),(0,a.iD)("span",Jt,"Value"))])),option:(0,a.w5)((({option:e})=>[(0,a.Wm)(Ce.Z,{term:(0,c.SU)(r)(e)},null,8,["term"])])),_:1},8,["modelValue","options"])):(0,c.SU)(w)&&!s.value.multipleValues?((0,a.wg)(),(0,a.j4)(L,{key:1,modelValue:b.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m({term:e})),options:e.dimension.in},{button:(0,a.w5)((({selected:e})=>[e?((0,a.wg)(),(0,a.j4)(Ce.Z,{key:0,term:(0,c.SU)(r)(e)},null,8,["term"])):((0,a.wg)(),(0,a.iD)("span",Qt,"Value"))])),option:(0,a.w5)((({option:e})=>[(0,a.Wm)(Ce.Z,{term:(0,c.SU)(r)(e)},null,8,["term"])])),_:1},8,["modelValue","options"])):(0,a.kq)("",!0),(0,c.SU)(w)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Yt,{key:2,placeholder:"Value",modelValue:b.value,"onUpdate:modelValue":n[2]||(n[2]=e=>m({term:e})),datatype:e.dimension.datatype},null,8,["modelValue","datatype"]))],64)):(0,a.kq)("",!0)],64))]))}};const tn=en;var nn=tn;const an=["onSubmit"],on={class:"mb-4 flex flex-col gap-2"},rn=(0,a._)("button",{type:"submit",class:"button-primary self-end"}," Apply filters ",-1);var ln={__name:"DimensionFilters",props:{dimension:{type:Object,required:!0},viewDimension:{type:Object,required:!0}},emits:["close","updateFilters"],setup(e,{emit:t}){const n=e,o=Ge(),{filtersOfDimension:r,updateDimensionFilters:l}=o,s=(0,v.ZP)(),u=(0,c.iH)([]);function p(){const e=u.value.filter((e=>!e.filterPlaceholder)).map((e=>e.filter));try{l(n.viewDimension,e),t("updateFilters")}catch(i){console.log(i)}t("close")}function d(){u.value.push({filterPlaceholder:!0})}function m({index:e,filter:t}){u.value[e]={filter:t}}return(0,a.bv)((()=>{const e=[];for(const t of r(n.viewDimension)){const{dimension:n,operation:i,args:a,argsList:o}=t;o?e.push({filter:{dimension:n,operation:i,argsList:o},readOnly:s.getFilterLabel({operation:i,args:a,argsList:o})}):e.push({filter:{dimension:n,operation:i,args:a}})}u.value=e})),(t,n)=>((0,a.wg)(),(0,a.iD)("form",{onSubmit:(0,i.iM)(p,["prevent"]),class:""},[(0,a._)("div",on,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.value,((t,n)=>((0,a.wg)(),(0,a.j4)(nn,{key:n,dimension:e.dimension,viewDimension:e.viewDimension,filterWrapper:t,onUpdateFilter:e=>m({index:n,filter:e})},null,8,["dimension","viewDimension","filterWrapper","onUpdateFilter"])))),128)),(0,a._)("button",{type:"button",onClick:d,class:"button-text justify-end"},[(0,a.Wm)((0,c.SU)(Ht.Z),{class:"w-5 h-5"}),(0,a.Uk)(" Add filter ")])]),rn],40,an))}};const sn=ln;var un=sn;const cn={class:"flex-grow flex items-center justify-end"};function pn(e,t,n,i,o,r){const l=(0,a.up)("information-circle-icon"),s=(0,a.up)("resource-details-dialog");return(0,a.wg)(),(0,a.iD)("div",cn,[(0,a._)("button",{onClick:t[0]||(t[0]=t=>e.isOpen=!0),title:"Dimension Metadata"},[(0,a.Wm)(l,{class:"text-gray-500 w-5 h-5"})]),(0,a.Wm)(s,{title:e.metadataTitle,pointer:this.dimension.ptr,"is-open":e.isOpen,onClose:t[1]||(t[1]=t=>e.isOpen=!1)},null,8,["title","pointer","is-open"])])}var dn=(0,a.aZ)({name:"DimensionMetadata",components:{InformationCircleIcon:ye.Z,ResourceDetailsDialog:Ve},props:{dimension:{type:Object,required:!0},metadataTitle:{type:String,required:!0}},data(){return{isOpen:!1}}});const mn=(0,_.Z)(dn,[["render",pn]]);var vn=mn;const fn=["title"];function gn(e,t,n,i,o,r){return e.scaleOfMeasure.term?((0,a.wg)(),(0,a.iD)("span",{key:0,title:e.label,class:"tag bg-primary-200"},[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon),{class:"h-5 w-5"}))],8,fn)):(0,a.kq)("",!0)}var wn=n(26505),bn=n(56271),yn=n(62251),hn=n(74563);const kn={[oe.wY.NominalScale.value]:hn.Z,[oe.wY.OrdinalScale.value]:wn.Z,[oe.wY.IntervalScale.value]:bn.Z,[oe.wY.RatioScale.value]:yn.Z};var Dn=(0,a.aZ)({name:"ScaleOfMeasureIcon",props:{scaleOfMeasure:{required:!0}},computed:{label(){return this.scaleOfMeasure?.value.split("/").slice(-1)[0]??""},icon(){const e=this.scaleOfMeasure?.value??"";return kn[e]||Vt.Z}}});const _n=(0,_.Z)(Dn,[["render",gn]]);var Sn=_n;const Un={class:"mb-2 flex items-center justify-between"},xn=["title"],Cn={key:0,class:"text-gray-500"},Zn={key:1},qn={key:1,class:"text-gray-500"},Vn={key:2,class:"pt-1"},jn={class:"flex items-center gap-1"},Pn=["title"],On={key:1,class:"tag",title:"Linked to shared dimension"};var Ln={__name:"DimensionHeader",props:{dimension:{type:Object,required:!0},viewDimension:{type:Object,required:!0},label:{type:Object},sortDimension:{type:Object,default:null},sortDirection:{type:St.Term,required:!0}},emits:["updateSort","updateFilters"],setup(e,{emit:t}){const n=e,i=(0,v.ZP)(),r=Ge(),{filtersOfDimension:l}=r,s=(0,a.Fl)((()=>n.dimension.ptr.out(oe.fK.comment,{language:i.language}).value)),u=(0,a.Fl)((()=>n.dimension.ptr.out(oe.sh.path).value)),p=(0,a.Fl)((()=>!!n.dimension.ptr.has(oe.E_.type,oe.kO.MeasureDimension).term)),d=(0,a.Fl)((()=>!!n.dimension.ptr.has(oe.E_.type,oe.kO.KeyDimension).term)),m=(0,a.Fl)((()=>!!n.dimension.ptr.has(oe.E_.type,oe.kO.SharedDimension).term)),f=(0,a.Fl)((()=>n.dimension.ptr.out(oe.$y.dataKind))),g=(0,a.Fl)((()=>n.dimension.ptr.out(oe.wY.scaleType))),w=(0,a.Fl)((()=>n.sortDimension&&n.dimension.path.equals(n.sortDimension.path))),b=(0,a.Fl)((()=>oe.ei.Ascending.equals(n.sortDirection))),y=(0,a.Fl)((()=>oe.ei.Descending.equals(n.sortDirection)));function h(){const e=w?k(n.sortDirection):oe.ei.Ascending;t("updateSort",n.dimension,e)}function k(e){return oe.ei.Ascending.equals(e)?oe.ei.Descending:oe.ei.Ascending}const D=(0,a.Fl)((()=>{const e=n.viewDimension.ptr.out(oe.fK.identifier).value;return e?`Metadata for ${e}`:"Dimension metadata"}));return(n,i)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["h-full px-2 py-1 flex flex-col justify-between",{"bg-primary-50":(0,c.SU)(p)}])},[(0,a._)("div",Un,[(0,a._)("button",{class:(0,o.C_)(["flex items-start text-left leading-tight",{"font-semibold":(0,c.SU)(p)||(0,c.SU)(d),underline:(0,c.SU)(w)}]),title:(0,c.SU)(u),onClick:h},[e.label?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[e.label.joined?((0,a.wg)(),(0,a.iD)("span",Cn,[(0,a._)("i",null,(0,o.zw)(e.label.value),1)])):((0,a.wg)(),(0,a.iD)("span",Zn,(0,o.zw)(e.label.value),1))],64)):((0,a.wg)(),(0,a.iD)("span",qn,"Untitled")),(0,c.SU)(w)?((0,a.wg)(),(0,a.iD)("span",Vn,[(0,c.SU)(b)?((0,a.wg)(),(0,a.j4)((0,c.SU)(j.Z),{key:0,class:"w-5 h-5"})):(0,a.kq)("",!0),(0,c.SU)(y)?((0,a.wg)(),(0,a.j4)((0,c.SU)(Dt.Z),{key:1,class:"w-5 h-5"})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],10,xn),(0,a.Wm)((0,c.SU)(Fe.J2),{class:"relative"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,c.SU)(Fe.O7),{as:"button"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,c.SU)(ht.Z),{class:(0,o.C_)(["w-5 h-5",{"text-primary-500":(0,c.SU)(l)(e.viewDimension).length>0}])},null,8,["class"])])),_:1}),(0,a.Wm)((0,c.SU)(Fe.Hi),{class:"z-10 absolute bg-white border rounded shadow-md p-2"},{default:(0,a.w5)((({close:n})=>[(0,a.Wm)(un,{dimension:e.dimension,"view-dimension":e.viewDimension,onClose:()=>n(),onUpdateFilters:i[0]||(i[0]=e=>t("updateFilters"))},null,8,["dimension","view-dimension","onClose"])])),_:1})])),_:1})]),(0,a._)("div",jn,[(0,a.Wm)(Sn,{"scale-of-measure":(0,c.SU)(g)},null,8,["scale-of-measure"]),(0,a.Wm)(Wt,{"data-kind":(0,c.SU)(f)},null,8,["data-kind"]),(0,c.SU)(s)?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"tag",title:(0,c.SU)(s)},[(0,a.Wm)((0,c.SU)(kt.Z),{class:"w-5 h-5"})],8,Pn)):(0,a.kq)("",!0),(0,c.SU)(m)?((0,a.wg)(),(0,a.iD)("span",On,[(0,a.Wm)((0,c.SU)(_t.Z),{class:"w-5 h-5"})])):(0,a.kq)("",!0),(0,a.Wm)(vn,{"metadata-title":(0,c.SU)(D),dimension:e.dimension},null,8,["metadata-title","dimension"])])],2))}};const Wn=Ln;var Hn=Wn,zn=n(75482);const In={class:"flex items-center gap-8"},Fn={class:"flex items-center gap-1"},Tn=["disabled"],Yn=["disabled"],$n=(0,a._)("span",null,"Page ",-1),Kn=["value"],En=(0,a._)("span",null," of ",-1),Nn=["title"],An={key:2},Mn=["disabled"],Rn=["disabled"],Bn=["value"];function Gn(e,t,n,i,r,l){const s=(0,a.up)("chevron-double-left-icon"),u=(0,a.up)("chevron-left-icon"),c=(0,a.up)("loading-icon"),p=(0,a.up)("exclamation-circle-icon"),d=(0,a.up)("chevron-right-icon"),m=(0,a.up)("chevron-double-right-icon");return(0,a.wg)(),(0,a.iD)("div",In,[(0,a._)("div",Fn,[(0,a._)("button",{onClick:t[0]||(t[0]=t=>e.updatePage(1)),title:"First page",class:"button px-2",disabled:1===e.page},[(0,a.Wm)(s,{class:"w-6 h-6"})],8,Tn),(0,a._)("button",{onClick:t[1]||(t[1]=t=>e.updatePage(e.page-1)),title:"Previous page",class:"button px-2",disabled:1===e.page},[(0,a.Wm)(u,{class:"w-6 h-6"})],8,Yn),$n,(0,a._)("input",{type:"text",inputmode:"numeric",value:e.page,onChange:t[2]||(t[2]=t=>e.updatePage(t.target.value)),class:"w-14 text-right"},null,40,Kn),En,e.itemsCount.isLoading?((0,a.wg)(),(0,a.j4)(c,{key:0})):e.itemsCount.error?((0,a.wg)(),(0,a.iD)("span",{key:1,class:"text-red-500",title:e.itemsCount.error},[(0,a.Wm)(p,{class:"w-5 h-5"})],8,Nn)):((0,a.wg)(),(0,a.iD)("span",An,(0,o.zw)(e.pagesCount),1)),(0,a._)("button",{onClick:t[3]||(t[3]=t=>e.updatePage(e.page+1)),title:"Next page",class:"button px-2",disabled:!e.pagesCount||e.page>=e.pagesCount},[(0,a.Wm)(d,{class:"w-6 h-6"})],8,Mn),(0,a._)("button",{onClick:t[4]||(t[4]=t=>e.updatePage(e.pagesCount)),title:"Last page",class:"button px-2",disabled:!e.pagesCount||e.page>=e.pagesCount},[(0,a.Wm)(m,{class:"w-6 h-6"})],8,Rn)]),(0,a._)("select",{value:e.pageSize,onChange:t[5]||(t[5]=t=>e.$emit("update:pageSize",Number(t.target.value))),title:"Items per page"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pageSizes,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e},(0,o.zw)(e),1)))),128))],40,Bn)])}var Xn=n(35482),Jn=n(49746),Qn=n(93434),ei=n(91461),ti=n(6677);const ni=["10","20","50","100"];var ii=(0,a.aZ)({name:"PaginationMenu",components:{ChevronDoubleLeftIcon:Xn.Z,ChevronDoubleRightIcon:Jn.Z,ChevronLeftIcon:Qn.Z,ChevronRightIcon:ei.Z,ExclamationCircleIcon:ti.Z,LoadingIcon:h.Z},props:{page:{type:Number,default:0},pageSize:{type:Number,default:ce},itemsCount:{type:Object,required:!0}},emits:["update:page","update:pageSize"],setup(e){const{itemsCount:t,pageSize:n}=(0,c.BK)(e),i=(0,a.Fl)((()=>t.value.isLoading||t.value.error?null:Math.ceil(t.value.data/n.value)));return{pagesCount:i,pageSizes:ni}},methods:{updatePage(e){const t=Number(e);isNaN(t)||this.$emit("update:page",t)}}});const ai=(0,_.Z)(ii,[["render",Gn]]);var oi=ai;const ri=u.ZP.namespace("https://cube.link/view/"),li=u.ZP.namespace("http://schema.org/");function si(e,{language:t}){return e.out(li.name,{language:t})}function ui({dimension:e,viewDimension:t,view:n},{language:i}){const a=si(e.ptr,{language:i});if(a.value)return{value:a.value};const o=t.ptr.out(ri.from).out(ri.join).term;if(o){const e=n.dimensions.find((e=>e.term.equals(o))),t=e.cubeDimensions;if(t.length){const e=si(t[0].ptr,{language:i});return{value:e.value,joined:t[0].ptr.term}}}}const ci={class:"h-1"},pi=["colspan"],di={class:"flex gap-2 justify-start"},mi=["onClick"],vi={key:0},fi=["colspan"],gi={key:1},wi=["colspan"],bi=(0,a._)("span",{class:"text-gray-500 py-3"},"toggle debug",-1),yi=[bi];var hi={__name:"TabularView",props:{view:{type:Object,required:!0}},emits:["updateDataset"],setup(e,{expose:t,emit:n}){const r=e,l=(0,c.iH)(!1),s=(0,c.iH)(1),u=Re()(1),d=Ge(),{currentView:f}=(0,m.Jk)(d),g=(0,v.ZP)(),{setPointers:w}=g,{language:b,pointer:y}=(0,m.Jk)(g);async function D(e){w(e),P(e),Y(),await I(e),H(e)}(0,a.bv)((()=>{f.value=r.view,D(r.view)})),t({currentView:f}),(0,a.YP)((()=>r.view),(()=>D(r.view)));const _=(0,c.iH)(k.V_()),S=(0,c.iH)(k.V_()),U=async()=>{if(f.value){let e=de({view:f.value,projection:{page:Z.value,pageSize:q.value,sortDimension:V.value,sortDirection:j.value}});await I(e)}},x=async e=>{_.value=k.V_(),e&&(await u.add((async()=>{try{_.value=await k.he(e.observations.bind(e))}catch(t){console.log(t),console.log("view that produced the error"),console.log(re(e).dataset.toString())}})),await u.add((async()=>{S.value=await k.he(e.observationCount.bind(e))})))};function C(){s.value=s.value+1}const Z=(0,c.iH)(),q=(0,c.iH)(),V=(0,c.XI)(),j=(0,c.XI)();function P(e){const t=pe(e);Z.value=t.page,q.value=t.pageSize,V.value=t.sortDimension,j.value=t.sortDirection}function O(e){Z.value=e,U()}function L(e){q.value=e,U()}function W(e,t){V.value=e,j.value=t,Z.value=1,U()}async function H(e){const t=[...(0,v.y6)(e,e.ptr)],n=50;while(t.length){const i=t.splice(0,n);z(e,i,(e=>{console.log("fetch shacl labels end")}))}}async function z(e,t,n){const i=e.getMainSource(),a=t.map((e=>`<${e.value}> `)).join(" ");t.length&&await u.add((async()=>{console.log(`Fetching labels for ${t.length} entities`);const o=await i.client.query.construct(`\nCONSTRUCT {\n      ?uri <http://schema.org/name> ?label .\n    } where {\n      ?uri <http://schema.org/name> ?label\n      VALUES ?uri { ${a} }\n}`);e.dataset.addAll(o),n(e)}))}async function I(e){await x(e),f.value=e,F(e)}async function F(e){const t=(0,v.Gr)({observations:_.value,view:e});await z(e,[...t],(e=>{f.value=e,C(),Y(),console.log("fetch observations labels end")}))}const T=(0,c.iH)([]);function Y(){T.value=f.value.filters.map((e=>{const{dimension:t,operation:n,arg:i,args:a,argsList:o}=e;if(!t)throw Error("Filter requires dimension",e);function r(e){const t=f.value.ptr.node(e).out(oe.fK.name,{language:b.value});return t.value?t.value:g.getDisplayString(e.value)}const l=f.value.dimensions.find((e=>e.term.equals(t)));if(l){const t=l.ptr.out(oe.ei.from).out(oe.ei.path).term,s=r(t),u=g.getFilterLabel({operation:n,arg:i,args:a,argsList:o});return{filter:e,label:`${s} ${u}`}}})).filter((e=>e))}function $({filter:e}){d.removeFilter({filter:e}),Z.value=1,Y(),U()}function K(){Z.value=1,Y(),U()}function E(e){n("updateDataset",e)}function N(e){const t=e.ptr.out(oe.wY.scaleType).term;return oe.wY.RatioScale.equals(t)||oe.wY.IntervalScale.equals(t)}function A(e){return!!e.ptr.has(oe.E_.type,oe.kO.MeasureDimension).term}const M=(0,a.Fl)((()=>(0,Xe.g)({view:f.value})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,c.SU)(M)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("table",ci,[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,c.SU)(M),(({viewDimension:e,cubeDimension:t})=>((0,a.wg)(),(0,a.iD)("th",{key:e.ptr.term.value,class:"border border-b-2 align-top text-left h-full"},[(0,a.Wm)(Hn,{dimension:t,label:(0,c.SU)(ui)({dimension:t,viewDimension:e,view:(0,c.SU)(f)},{language:(0,c.SU)(b)}),"view-dimension":e,"sort-dimension":(0,c.SU)(V),"sort-direction":(0,c.SU)(j),onUpdateSort:W,onUpdateFilters:K},null,8,["dimension","label","view-dimension","sort-dimension","sort-direction"])])))),128))]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{key:`${s.value}/filtersSummary`},[(0,a._)("td",{colspan:(0,c.SU)(M).length,class:"border px-2 py-2"},[(0,a._)("div",di,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.value,(({filter:e,label:t},n)=>((0,a.wg)(),(0,a.iD)("span",{key:n,class:"tag bg-gray-100 rounded-md flex items-center gap-1"},[(0,a._)("span",null,(0,o.zw)(t),1),(0,a._)("button",{title:"Remove filter",onClick:t=>$({filter:e}),class:"button-text"},[(0,a.Wm)((0,c.SU)(p.Z),{class:"w-5 h-5"})],8,mi)])))),128))])],8,pi)])),[[i.F8,T.value.length>0]])]),_.value.isLoading?((0,a.wg)(),(0,a.iD)("tbody",vi,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Array(q.value),(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",{colspan:(0,c.SU)(M).length,class:"border px-2 py-2"},[(0,a.Wm)(h.Z)],8,fi)])))),128))])):_.value.error?((0,a.wg)(),(0,a.iD)("tbody",gi,[(0,a._)("tr",null,[(0,a._)("td",{colspan:(0,c.SU)(M).length,class:"border px-2 py-1"},(0,o.zw)(_.value.error),9,wi)])])):((0,a.wg)(),(0,a.iD)("tbody",{key:`${s.value}/observations`},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,c.SU)(M),(({cubeDimension:t,labelCubePath:n,viewAs:i})=>((0,a.wg)(),(0,a.iD)("td",{key:t.ptr.term.value,class:(0,o.C_)(["border px-2 py-1 whitespace-nowrap",{"text-right tabular-nums":N(t),"bg-primary-50":A(t)}])},[(0,a.Wm)(zn["default"],{value:e[i.value],forceLabel:n?e[n.value]:void 0,pointer:(0,c.SU)(y),language:(0,c.SU)(b)},null,8,["value","forceLabel","pointer","language"])],2)))),128))])))),128))]))]),(0,a.Wm)(oi,{page:Z.value,pageSize:q.value,"items-count":S.value,"onUpdate:page":O,"onUpdate:pageSize":L},null,8,["page","pageSize","items-count"])],64)):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("button",{class:"flex items-start text-left leading-tight",onClick:t[0]||(t[0]=e=>l.value=!l.value)},yi),!0===l.value?((0,a.wg)(),(0,a.j4)(yt,{key:`${s.value}/debug`,debugView:(0,c.SU)(f),onUpdateDataset:E},null,8,["debugView"])):(0,a.kq)("",!0)])]))}};const ki=hi;var Di=ki;const _i={class:"p-4"},Si={key:0},Ui={key:1,class:"text-red-500"},xi={key:3,class:"flex flex-col gap-4"},Ci={key:0};var Zi={__name:"Viewer",props:{source:{type:s.Source,required:!0},viewInput:{type:Object}},emits:["setViewInput"],setup(e,{emit:t}){const n=e,i=0,l=(0,c.XI)(null);async function s({source:e,viewInput:t}){const{cubeUri:n,viewUri:i,dataset:a}=t;if(!(n||i||a))throw Error("No cubeUri, viewUri or dataset");return n?await ve({source:e,cubeUri:n}):i?await fe({source:e,viewUri:i}):a?await ge({dataset:a,fallbackSource:e}):void 0}(0,a.bv)((async()=>{await f()}));const{isLoading:u,state:p,isReady:d,error:m,execute:v}=(0,r.PL)((async e=>{console.log("Fetching"),l.value=await s(e)}),{},{delay:i,resetOnExecute:!1,immediate:!1});async function f(){await v(i,{source:n.source,viewInput:n.viewInput})}async function g({dataset:e}){t("setViewInput",{dataset:e})}(0,a.YP)((()=>n.viewInput),(()=>f())),(0,a.YP)((()=>n.source),(()=>f()));const w=(0,c.iH)(),b=(0,c.iH)(),y=(0,r.ltg)("hash-params");function k(){if(w.value){const e=w.value.currentView,t=re(e).dataset,n=t.toString(),i=y.endpointUrl,a=new URL(`${document.location.protocol}//${document.location.host}/#view=${encodeURIComponent(n)}&endpointUrl=${encodeURIComponent(i)}`);b.value.copyURL(a)}}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",_i,[(0,c.SU)(u)?((0,a.wg)(),(0,a.iD)("div",Si,[(0,a.Wm)(h.Z)])):(0,a.kq)("",!0),(0,c.SU)(m)?((0,a.wg)(),(0,a.iD)("div",Ui,(0,o.zw)((0,c.SU)(m)),1)):(0,a.kq)("",!0),(0,c.SU)(l)?((0,a.wg)(),(0,a.j4)(Ae,{key:2,ref_key:"shareButton",ref:b,onPrepareParams:k},null,512)):(0,a.kq)("",!0),(0,c.SU)(d)?((0,a.wg)(),(0,a.iD)("div",xi,[(0,c.SU)(l)?((0,a.wg)(),(0,a.iD)("header",Ci,[(0,c.SU)(l).cubes?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)((0,c.SU)(l).cubes(),(e=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(Ie,{pointer:(0,c.SU)(l).ptr.node(e)},null,8,["pointer"])])))),256)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,c.SU)(l)?((0,a.wg)(),(0,a.j4)(Di,{key:1,ref_key:"tabularView",ref:w,onUpdateDataset:g,view:(0,c.SU)(l)},null,8,["view"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]))}};const qi=Zi;var Vi=qi;const ji={class:"w-full h-full p-4 flex flex-col gap-4"},Pi=(0,a._)("h1",{class:"font-bold text text-gray-600 uppercase"}," Zazuko Cube Viewer ",-1),Oi={key:0,class:"text-red-500"};var Li={__name:"App",setup(e){const t=new l.Z,n=(0,r.ltg)("hash-params"),i=(0,c.iH)(null),p=(0,c.iH)(),d=(0,c.iH)();function m({cubeUri:e,viewUri:t,dataset:n}){return n?{dataset:n}:e?{cubeUri:e}:t?{viewUri:t}:{}}function v(){return i.value&&(p.value.viewUri||p.value.cubeUri||p.value.dataset)}function f(e){n.endpointUrl=e.endpoint,n.user=e.user,console.log("updateSource",e)}function g(e){w(e),p.value=e}function w(e){n.viewUri=e.viewUri?e.viewUri:void 0,n.cubeUri=e.cubeUri?e.cubeUri:void 0,n.view=e.dataset?e.dataset.toString():void 0}return(0,a.bv)((()=>{let e;if(n.view)try{const i=t.parse(n.view);e=u.ZP.dataset().addAll(i)}catch(a){d.value=a}n.endpointUrl&&(i.value=new s.Source({endpointUrl:n.endpointUrl,user:n.user,password:n.password,sourceGraph:n.sourceGraph})),p.value=m({cubeUri:n.cubeUri,viewUri:n.viewUri,dataset:e})})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",ji,[Pi,d.value?((0,a.wg)(),(0,a.iD)("div",Oi,(0,o.zw)(d.value),1)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[p.value?((0,a.wg)(),(0,a.j4)(ae,{key:0,viewInput:p.value,source:i.value,"onUpdate:source":[t[0]||(t[0]=e=>i.value=e),f],onSetViewInput:g},null,8,["viewInput","source"])):(0,a.kq)("",!0),v()?((0,a.wg)(),(0,a.j4)(Vi,{key:1,source:i.value,viewInput:p.value,onSetViewInput:g,class:"bg-white rounded shadow-lg overflow-x-auto"},null,8,["source","viewInput"])):(0,a.kq)("",!0)],64))]))}};const Wi=Li;var Hi=Wi;const zi=(0,i.ri)(Hi).use((0,m.WB)());zi.mount("#app")},10368:function(e,t,n){"use strict";n.d(t,{J:function(){return a},s:function(){return o}});var i=n(71756);const a=[{term:i.ei.Eq,label:"="},{term:i.ei.Ne,label:"!=",multipleValues:!0},{term:i.ei.In,label:"in",multipleValues:!0},{term:i.ei.Lt,label:"<",onlyLiterals:!0},{term:i.ei.Lte,label:"<=",onlyLiterals:!0},{term:i.ei.Gt,label:">",onlyLiterals:!0},{term:i.ei.Gte,label:">=",onlyLiterals:!0}];function o(e){for(const t of a)if(t.term.equals(e))return t.label}},71756:function(e,t,n){"use strict";n.d(t,{$y:function(){return l},E_:function(){return u},Fi:function(){return f},XV:function(){return d},Zv:function(){return v},ei:function(){return m},fK:function(){return c},kO:function(){return r},sh:function(){return p},wY:function(){return s}});var i=n(2518),a=n(74919),o=(n(34667),n(27695));const r=o.ZP.namespace("https://cube.link/"),l=o.ZP.namespace("https://cube.link/meta/"),s=o.ZP.namespace(i.Z.qudt),u=o.ZP.namespace(i.Z.rdf),c=o.ZP.namespace(i.Z.schema),p=o.ZP.namespace(i.Z.sh),d=o.ZP.namespace(i.Z.time),m=o.ZP.namespace("https://cube.link/view/"),v=o.ZP.namespace("http://www.w3.org/2000/01/rdf-schema#");function f(e,t){return t&&e.startsWith(t)?e.replace(t,"").replace(/^[/#]/,""):(0,a.F)(e)||e}},14734:function(e,t,n){"use strict";function i(){return{isLoading:!0,data:null,error:null}}function a(e){return{isLoading:!1,data:e,error:null}}function o(e){return{isLoading:!1,data:null,error:e}}async function r(e){try{const t=await e();return a(t)}catch(t){return console.log(t),o(t)}}n.d(t,{CL:function(){return a},V_:function(){return i},he:function(){return r},vU:function(){return o}})},48872:function(e,t,n){"use strict";n.d(t,{Gr:function(){return m},y6:function(){return d}});var i=n(69876),a=n(27695),o=n(2262),r=n(11809),l=n(15506),s=n(10368),u=n(71756);const c=["en","*"],p=(0,i.Q_)("langStore",(()=>{const e=(0,o.iH)(c),t=(0,o.iH)(""),n=(0,o.iH)(a.ZP.clownface());function i(e){const i=e.dimensions[0].cubes[0];n.value=e.ptr.node(i),t.value=n.value.term}function r(t){if(t)return"NamedNode"===t.termType&&(n.value.node(t).out(u.fK.name,{language:e.value}).term||n.value.node(t).out(u.Zv.label,{language:e.value}).term)||t}function l(e,n=!1){if("Literal"===e.termType){const i=n&&e.datatype?`^^${v(e.datatype,t.value)}`:"",a=n&&e.language?`@${e.language}`:"";return`"${e.value}${a}"${i}`}return v(e,t.value)}function p({operation:e,arg:t,args:n,argsList:i}){function a(e){const t=r(e);return l(t)}const o=(0,s.s)(e),u=t?a(t):"",c=!t&&n?`${n.map(a).join(",")}`:"",p=i?`[${i.map(a).join(",")}]`:"";return`${o} ${u}${c}${p}`}return{language:e,pointer:n,setPointers:i,getDisplayTerm:r,getDisplayString:l,getFilterLabel:p}}));function d(e,t){const n=a.ZP.termSet();return e.dimensions.forEach((e=>{(0,r.C)({dimension:e}).forEach((e=>{e.in.filter((e=>"NamedNode"===e.termType)).forEach((e=>{t.node(e).out(u.fK.name).value||n.add(e)}))}))})),n}function m({observations:e,view:t}){const n=a.ZP.termSet();for(const i of e?.data??[])for(const[e,a]of Object.entries(i))a&&"NamedNode"===a.termType&&!(0,l.u)({cubePathStr:e,view:t})&&(t.ptr.node(a).out(u.fK.name).value||n.add(a));return n}function v(e,t){const n=e=>"string"===typeof e||e instanceof String,i=n(e)?e:e.value,a=n(t)?t:t.value,o=u.Fi(i,a);return o===i?u.Fi(i,a.split("/").splice(0,a.split("/").length-1).join("/")):o}t["ZP"]=p},75482:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(66252),a=n(2262),o=n(68825),r=n(48872);const l={class:"flex items-center justify-center min-h-screen px-4"},s={class:"z-10 max-w-full overflow-x-auto mx-auto bg-white rounded p-4"};function u(e,t,n,a,o,r){const u=(0,i.up)("dialog-overlay"),c=(0,i.up)("x-circle-icon"),p=(0,i.up)("dialog-title"),d=(0,i.up)("resource-details"),m=(0,i.up)("Dialog");return(0,i.wg)(),(0,i.j4)(m,{open:e.isOpen,onClose:t[1]||(t[1]=t=>e.$emit("close")),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i.Wm)(u,{class:"fixed inset-0 bg-black opacity-40"}),(0,i._)("div",s,[(0,i.Wm)(p,{class:"flex justify-between items-center gap-2 mb-2 font-bold"},{default:(0,i.w5)((()=>[(0,i._)("button",{type:"button",class:"button-text",title:"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,i.Wm)(c,{class:"h-6 w-6"})])])),_:1}),(0,i.Wm)(d,{uri:e.uri,pointer:e.pointer},null,8,["uri","pointer"])])])])),_:1},8,["open"])}var c=n(18047),p=n(20277),d=n(3577);const m={class:"mb-4 whitespace-nowrap"},v=["href"],f={key:1,class:"text-red-500"},g=(0,i._)("h3",{class:"font-bold"},"Could not load resource",-1),w={key:2},b={class:"py-2 pr-4 font-semibold"},y={class:"py-2 flex flex-col gap-1"};function h(e,t,n,a,o,r){const l=(0,i.up)("external-link-icon"),s=(0,i.up)("loading-icon"),u=(0,i.up)("term-display"),c=(0,i.up)("observation-value");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",m,[(0,i._)("a",{href:e.uri.value,target:"_blank",rel:"noopener",class:"group flex items-center gap-1"},[(0,i.Uk)((0,d.zw)(e.uri.value)+" ",1),(0,i.Wm)(l,{class:"w-4 h-4 invisible group-hover:visible"})],8,v)]),e.resource.isLoading?((0,i.wg)(),(0,i.j4)(s,{key:0})):e.resource.error?((0,i.wg)(),(0,i.iD)("section",f,[g,(0,i.Uk)(" "+(0,d.zw)(e.resource.error),1)])):((0,i.wg)(),(0,i.iD)("table",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.properties,(([t,n],a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a,class:"align-top"},[(0,i._)("td",b,[(0,i.Wm)(u,{term:t,base:e.pointer.term.value},null,8,["term","base"])]),(0,i._)("td",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n,((t,n)=>((0,i.wg)(),(0,i.iD)("p",{key:n},[(0,i.Wm)(c,{value:t,pointer:e.pointer},null,8,["value","pointer"])])))),128))])])))),128))]))])}var k=n(43498),D=n(48330),_=n(27695),S=n(68736),U=n(69933),x=n(14734);_.ZP.formats["import"](D.ZP);var C=(0,i.aZ)({name:"ResourceDetails",components:{ExternalLinkIcon:k.Z,LoadingIcon:S.Z,ObservationValue:(0,i.RC)((()=>Promise.resolve().then(n.bind(n,75482)))),TermDisplay:U.Z},props:{uri:{type:o.Term,required:!0},pointer:{type:Object,required:!0}},setup(e){const{uri:t}=(0,a.BK)(e),n=(0,a.iH)(x.V_()),o=async()=>{const e=t.value;try{const t=await _.ZP.fetch(e.value);if(200!==t.status)throw new Error(`${t.status}`);{const i=await t.dataset();n.value=x.CL(_.ZP.clownface({dataset:i,term:e}))}}catch(i){n.value=x.vU(i.message)}};return(0,i.bv)(o),(0,i.YP)(t,o),{resource:n}},computed:{properties(){const e=this.resource.data;if(!e)return[];const t=[...e.dataset.match(e.term,null,null)],n=_.ZP.termSet(t.map((({predicate:e})=>e)));return[...n].map((t=>{const n=e.out(t).terms;return[t,n]}))}}}),Z=n(83744);const q=(0,Z.Z)(C,[["render",h]]);var V=q,j=(0,i.aZ)({name:"ResourceExplorer",components:{Dialog:c.Vq,DialogOverlay:c.t9,DialogTitle:c.$N,ResourceDetails:V,XCircleIcon:p.Z},props:{isOpen:{type:Boolean,required:!0},uri:{type:o.Term,required:!0},pointer:{type:Object,required:!0}},emits:["close"]});const P=(0,Z.Z)(j,[["render",u]]);var O=P;const L={key:0},W={key:2,class:"flex-grow flex items-center justify-end"};var H={__name:"ObservationValue",props:{value:{type:o.Term,required:!0},forceLabel:{type:o.Term,required:!1}},setup(e){const t=(0,a.iH)(!1),n=(0,r.ZP)();return(o,r)=>e.value?"Literal"===e.value.termType?((0,i.wg)(),(0,i.j4)(U.Z,{key:1,term:e.value},null,8,["term"])):((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("button",{onClick:r[0]||(r[0]=e=>t.value=!0),class:"tag bg-gray-200 whitespace-nowrap"},[e.forceLabel?((0,i.wg)(),(0,i.j4)(U.Z,{key:0,term:e.forceLabel},null,8,["term"])):((0,i.wg)(),(0,i.j4)(U.Z,{key:1,term:e.value},null,8,["term"]))]),(0,i.Wm)(O,{uri:e.value,pointer:(0,a.SU)(n).pointer,"is-open":t.value,onClose:r[1]||(r[1]=e=>t.value=!1)},null,8,["uri","pointer","is-open"])])):((0,i.wg)(),(0,i.iD)("span",L,"-"))}};const z=H;var I=z},69933:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(66252),a=n(2262),o=n(3577),r=n(68825),l=n(48872);const s=["title"],u={key:0,class:"text-gray-400"};var c={__name:"TermDisplay",props:{term:{type:r.Term,required:!0},showLanguage:{type:Boolean,default:!1}},setup(e){const t=e,{getDisplayTerm:n,getDisplayString:r}=(0,l.ZP)(),c=(0,i.Fl)((()=>r?r(t.term):t.term)),p=(0,i.Fl)((()=>n?n(t.term).value:t.term.value));return(t,n)=>((0,i.wg)(),(0,i.iD)("span",{title:(0,a.SU)(c)},[(0,i.Uk)((0,o.zw)((0,a.SU)(p))+" ",1),e.showLanguage&&e.term.language?((0,i.wg)(),(0,i.iD)("span",u,"@"+(0,o.zw)(e.term.language),1)):(0,i.kq)("",!0)],8,s))}};const p=c;var d=p},68736:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(66252);const a={class:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},o=(0,i._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r=(0,i._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),l=[o,r];function s(e,t){return(0,i.wg)(),(0,i.iD)("svg",a,l)}var u=n(83744);const c={},p=(0,u.Z)(c,[["render",s]]);var d=p},7716:function(){},53383:function(){},71156:function(){},45757:function(){},56965:function(){},70147:function(){},52361:function(){},94616:function(){}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],o=e[c][2];for(var l=!0,s=0;s<i.length;s++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[s])}))?i.splice(s--,1):(l=!1,o<r&&(r=o));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"===typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&i;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){r[e]=function(){return i[e]}}));return r["default"]=function(){return i},n.d(o,r),o}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{5:"f03e7855",21:"f9e08b55",46:"8168bc88",144:"150719c5",206:"f6e56e5d",404:"9a5d18f2",442:"b4c6bd3b",476:"278d1186",565:"fb659822",624:"0bcff1c6",650:"04f2b15d",787:"7e6f2e16",833:"660f9520"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="cube-viewer:";n.l=function(i,a,o,r){if(e[i])e[i].push(a);else{var l,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var p=u[c];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==t+o){l=p;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+o),l.src=i),e[i]=[a];var d=function(t,n){l.onerror=l.onload=null,clearTimeout(m);var a=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e={143:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=o);var r=n.p+n.u(t),l=new Error,s=function(i){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,a[1](l)}};n.l(r,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],l=i[1],s=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(i);u<r.length;u++)o=r[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},i=self["webpackChunkcube_viewer"]=self["webpackChunkcube_viewer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(46024)}));i=n.O(i)})();
//# sourceMappingURL=app.cd38a446.js.map